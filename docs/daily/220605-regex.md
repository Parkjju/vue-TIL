---
title: DailyTech - 정규표현식 (Regex)

---
## 더 이상 미루지말자. 정규표현식!

유튜브 드림코딩 엘리의 [정규표현식, 더이상 미루지 말자](https://youtu.be/t3M6toIflyQ) 내용을 요약하였습니다.

정규표현식은 **Lorem ipsum과 같이 말도 안되게 복잡한 문자열 속에서 특정 패턴을 갖는 문자열을 추출할 수 있도록 해줍니다.** 이메일 또는 웹사이트 하이퍼링크 주소와 같은 패턴들을 추출해내는 것입니다.

또는 이메일 및 패스워드와 같은 데이터 유효성 검사를 진행할 때도 사용할 수 있습니다.

기본적인 정규표현식 구조는 다음과 같습니다.

**/regex?/i**

1. 양쪽에 슬래쉬로 감싸 정규표현식임을 나타냅니다.
2. 슬래쉬 안쪽에 정규표현식 패턴을 작성합니다.
3. i 등의 옵션을 통해 어떤 조건으로 검색할건지 플래그(flag)를 지정합니다.

:::tip 정규표현식 플래그
플래그는 일반적으로 g(global), i(case Insensitive), m(multiline)을 주로 이용합니다.

그 외의 플래그로는 s(single line / dotall), u(unicode), y(sticky)가 있습니다.

두 개 이상의 플래그를 지정하기 위해서는 그냥 해당 플래그들을 그대로 작성하면 됩니다. `/regex?/gi`

1. g : 패턴이 일치하는 문자열을 iterative하게 모두 찾아냅니다.
2. i : 대소문자 구분 없이 서치합니다.
3. m :
4. s : `a.b`는 a와 b사이에 어떤 문자가 들어와도 모두 매치되며 이러한 경우를 활용할때 사용한다. (모든 브라우저에서 호환되지 않을 수 있습니다.)
5. u : 정규표현식의 패턴을 유니코드 나열로 취급합니다. 가령 `/\u{1F004}-\u{1F9E6}/u의 경우 1F004유니코드 값과 1F9E6 유니코드 값의 차이에 해당하는 문자가 출력되게 됩니다. \u를 통해 유니코드 이스케이프 취급을 할 수 있습니다.
6. y : 자바스크립트에서 y플래그로 정규표현식 객체를 생성하고, `lastIndex`라는 프로퍼티를 부여하면 프로퍼티 값에 해당하는 인덱스 값부터의 문자만 검사하게 됩니다. `Hello, jun`이라는 문자가 있을때 lastIndex가 7이면 jun을 검사할때 true를 반환하게 됩니다.
:::

[엘리님 regex 연습 사이트](regexr.com/5mhou)에 접속하여 연습을 진행합니다.


## 1. 문자 검색

패턴 안에는 어떠한 문자든지 들어갈 수 있습니다.

```text
/Hello/gm
```

위 정규표현식을 사용하면 전체 문자열 중 Hello라는 문자열이 포함된 것들을 추출하게 되는 것입니다. 

## 2. 패턴 그룹핑
패턴을 **그룹핑 할 수 있습니다.** 그룹핑을 할 때에는 OR 연산자 `|`를 사용합니다.

```text
/(Hello|jun)|(Lorem)/gm
```

위 정규표현식을 사용하면 Hello, jun, Lorem이라는 문자열이 모두 검색되지만 Hello와 jun은 group#1으로, Lorem은 group#2로 관리됩니다. 그룹으로 관리하고 싶지 않으면 괄호로 묶은 뒤 `(?:Hello|jun)`처럼 `?:`로 시작하면 됩니다.

## 3. 문자셋 지정

다음 문자열을 보겠습니다.

```text
......
jun
pun
mun
......
```
복잡한 문자열 가운데 위 세 단어를 추출해야하는 상황이라면 `/(j|p|m)un/gm` 패턴으로 찾아도 되지만, `j,p,m`이에외 다양한 문자열이 추가적으로 붙어야 한다면 복잡해집니다.

이때 문자셋을 한번에 지정할 수 있게 해주는 것이 바로 대괄호입니다.

위 문자열은 다음과 같은 패턴으로 찾을 수 있습니다.

```text
/[jpm]un/gm
```

## 4. 문자셋 범위로 지정

해당하는 문자 모두를 일렬로 나열해도 되지만 a부터 오름차순으로 범위를 지정할 수도 있습니다. `/[a-f]un/gm`

다른 문자와 묶이지 않은 채로 범위 지정 문자셋만 표기하면 (`/[a-f][0-5]/gm`) 범위 내의 문자가 모두 찾아지게 됩니다. `a-f`나 `0-5`라고 해서 문자가 abcdef, 012345로 이루어지지 않아도 된다는 의미입니다.

## 5. 문자셋 not 조건

문자셋 검색을 할때 not조건을 붙이기 위해서 ^를 사용합니다.

```text
/[^a-z0-9]/gm
```

위 패턴은 a-z가 아니면서 0-9도 아닌 문자열을 검색하는 패턴입니다.

## 6. 수량과 관련된 패턴
특정 문자나 문자열 그룹이 하나 있거나 / 없거나 / 둘 이상일 때의 패턴을 지정합니다. 찾고싶은 문자 뒤에 기호를 붙입니다.

1. ? : 대상이 하나 있거나 없거나 두 경우 모두 검색합니다. 
2. * : 대상이 하나 있거나 없거나 둘 이상이 있는 경우를 검색합니다.
3. + : ? 패턴에서 **없거나** 경우를 제외하여 하나 이상이 있을 경우의 패턴만 검색합니다.
```text
grey gray gry graay graaaay
```
위 문자열을 ? 또는 * 패턴으로 검색해봅니다.

```text
/gr(aa)?/gm
```
위 패턴을 사용하면 graaaa는 검색조건에 맞지 않게 됩니다. (aa)그룹이 두개 이상이기 때문입니다.

```text
/gr(aa)*/gm
```

위 패턴을 사용해야 graaaa까지 패턴에 매칭되게 됩니다.

```text
/gr(aa)+/gm
```

위 패턴을 사용하면 grey gray gry는 검색에서 제외됩니다.

하나, 둘로만 다뤄졌던 수량을 지정하고싶으면 중괄호를 사용합니다. 중괄호 안에 숫자가 하나만 들어가면 n번 이상 반복된 문자열을 찾게 되고, {minimum, maximum}처럼 두 숫자를 쉼표로 구분하여 작성하게 되면 최소 몇번, 최대 몇번 반복된 문자열을 찾게 됩니다.

```text
/gr(aa){2}/gm
```
aa그룹이 두번 반복된 graaaa만 검색 결과로 나타나게 됩니다.

## 7. 경계와 관련된 패턴
띄어쓰기를 기준으로 구분되는 단어에 있어서 몇 가지 문자를 예시로 듭니다.

```text
hi hihi hihihi hi
```

위 문자에서 hi라는 문자셋을 검색한다고 할때 hi가 단어의 시작일 때도 있고 단어의 끝일때도 있습니다.

이때 활용하는 것이 경계와 관련된 패턴입니다.
1. \b : \b는 문자셋으로부터의 위치에 따라 검색결과가 달라집니다. `\bhi`로 검색한다면 단어의 시작이 hi인 문자셋을 검색하고, `hi\b`로 검색하면 단어의 끝이 hi인 문자셋을 검색합니다.
	* `\bhi` : **hi** **hi**hi **hi**hihi **hi**
2. \B : \B또한 문자셋으로부터의 위치에 따라 결과가 달라집니다. `hi\B`로 검색하면 끝에 위치한 hi를 제외한 hi문자셋을 검색하고, `\Bhi`로 검색하면 처음에 위치한 hi를 제외한 hi문자셋을 검색합니다.
	* `hi\B` : hi **hi**hi **hihi**hi hi
3. ^대상 : 멀티라인 플래그라는 가정 하에 각 문장마다 문자셋의 시작이 검색 대상과 일치하는지 찾습니다.
4. 대상$ : 멀티라인 플래그라는 가정 하에 각 문장마다 문자셋의 **끝이** 검색 대상과 일치하는지 찾습니다.


3,4번 패턴을 이해하기 위한 문자열입니다.
```text
hi
hiih
hHe hi
```

위 문자열에서 `^hi`로 검색하면 hi, hiih문장이 선택되고 hi가 검색결과로 나타납니다.

위 문자열에서 `hi$`로 검색하면 `hHe hi` 문장이 선택되고 검색결과로 해당 문장의 hi가 나타납니다.

## 8. 문자 클래스
정규표현식에서 특수문자는 간혹 특정 패턴 자체를 의미할 때가 있습니다. 가령, 패턴으로 `/./gm`을 지정하면 `.`에 해당하는 문자를 찾는 것이 아니라 모든 문자를 검색하게 됩니다. 

따라서 특수 문자 그 자체를 검색하고 싶을 때는 `\` 백슬래시를 앞에 붙여줍니다. `/\./gm`으로 패턴을 지정해야 `.`을 찾게 됩니다.

다음은 나머지 문자 클래스에 대한 패턴입니다.
1. \d : 숫자 모두를 검색합니다.
2. \D : 숫자가 아닌 모두를 검색합니다.
3. \w : 모든 문자열을(문자셋, 단어) 검색합니다.
4. \W : 문자열을 제외한 모두를 검색합니다.
5. \s : 공백을 찾습니다.
6. \S : 공백을 제외한 모두를 찾습니다.

## 자바스크립트에서 활용하기

다음 정규표현식을 보겠습니다.

```javascript
const regex =  \d{2,3}-\d{3}-\d{4}/gm
```
어떤 의미인지는 직접 해석해보세요!

참고로, 정규표현식을 변수에 담기 위해서 따옴표로 감싸지 않아야 합니다.

이후 문자열의 `match` 메서드를 활용하면 정규표현식에 일치하는 데이터가 배열 형태로 반환됩니다.

위 정규표현식에 따른 문자열 `010-0000-0000`을 예시로 들어보겠습니다.
```javascript
const number = '010-000-0000';
console.log(number.match(regex)); // 정규표현식 일치하면 데이터 출력
```

데이터를 구분하여 긁어오기 위해 **그룹이라는 개념을 사용합니다.**




