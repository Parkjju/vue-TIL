---
title: DailyTech - Recoil Project Structure Best Practices
---

## 개요

리코일은 리액트의 전역 상태관리 라이브러리 중 하나입니다. 주로 쓰이는 리덕스에 비해 리액트 생태계에 나타난지 얼마 되지 않아 커뮤니티 형성이 크게 이루어지지 않고 있습니다.

사용자가 상대적으로 적다 보니 라이브러리 사용에 대해 이렇다 할 베스트 프랙티스가 고정되지 않고 있는 상황입니다. [Medium - Recoil Project Structure Best Practices](https://wes-rast.medium.com/recoil-project-structure-best-practices-79e74a475caa) 이 문서에서는 기존 리코일 디렉토리 구조의 문제점을 짚어보고 개선 방향에 대해 제시하게 됩니다.

## 기존 폴더 구조

리코일을 잠시 복습해보자면, 전역 상태를 관리할 `atom`파일을 생성하고 이들을 상속받아 derived된 셀렉터들이 있습니다. 셀렉터와 아톰에 대해 폴더 구조를 나타내면 다음과 같습니다.

```text
.
├── App.tsx
├── index.tsx
└── src
    ├── components
    │   └── Main.tsx
    └── recoil
        ├── atoms
        │   └── exampleAtom.ts
        └── selectors
            └── exampleSelector.ts
```

`Main.tsx`에서 아톰으로부터 상태를 끌어와 컴포넌트를 렌더링하는 상황입니다.

리코일의 아톰은 기본적으로 좋은 성능을 위해 큰 데이터들을 작은 단위로 쪼개어 사용하는 것을 전제로 합니다.

각종 데이터를 중앙집중적으로 관리하는 아톰 특성상 그 구조가 커지면 커질수록 해당 아톰을 활용하는 컴포넌트가 필요없이 재 렌더링하는 문제가 존재할 수 있습니다.

따라서 아톰을 최대한 잘게 쪼개어 관리하게 되는데, 이때 한 어플리케이션에 너무나 많은 아톰들이 생길 수 있다는 것이 문제입니다.

추가적으로, 한 아톰에 대해 두 컴포넌트가 `useRecoil`훅을 통해 접근하는 상황일 때에 아톰 값이 바뀌게 되면 다른 컴포넌트에 변화가 필요 없더라도 재 렌더링이 발생하는 문제점이 있습니다.

## 네이밍 문제

## Reference

1. [Medium - Recoil Project Structure Best Practices](https://wes-rast.medium.com/recoil-project-structure-best-practices-79e74a475caa)
