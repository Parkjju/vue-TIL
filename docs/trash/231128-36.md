---
title: Snack - [iOS] RxSwiftì™€ loadViewIfNeededì˜ í™œìš©
tags: ['Snack', 'RxSwift', 'UIKit', 'í¬ì¦ˆí”¼ì»¤ ê°œë°œ ì´ì•¼ê¸°']
---

í”„ë¡œì íŠ¸ í¬ì¦ˆí”¼ì»¤ ê°œë°œ ì´ì•¼ê¸°ì…ë‹ˆë‹¤! ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ë†€ëŸ¬ì™€ì£¼ì„¸ìš” :) [[í¬ì¦ˆí”¼ì»¤ ë‹¤ìš´ë°›ê¸°ğŸ”—]](https://apps.apple.com/kr/app/%ED%8F%AC%EC%A6%88%ED%94%BC%EC%BB%A4-%EB%84%A4%EC%BB%B7%EC%82%AC%EC%A7%84-%ED%8F%AC%EC%A6%88%EC%B6%94%EC%B2%9C/id6474260471)

# RxSwiftì™€ loadViewIfNeededì˜ í™œìš©

## ë¬¸ì œ ìƒí™©

ë¬¸ì œì˜ í™”ë©´ì„ ë³´ì.

![36-1](../.vuepress/assets/snack/36-1.gif)

1. í¬ì¦ˆí”¼ë“œ ë·°ì—ì„œ íƒœê·¸ë¥¼ ì„ íƒí•˜ì—¬ 1ì°¨ í•„í„°ë§ ì§„í–‰
2. ì¶”ê°€í•œ í•„í„° ë‹¤ì‹œ ì‚­ì œ
3. í•„í„°ë§ ëª¨ë‹¬ì°½ì„ ë„ìš°ê³  í•„í„° ìƒˆë¡œ ì ìš©
4. **2ë²ˆì—ì„œ ì‚­ì œí•œ í•„í„°ê°€ ê°‘ìê¸° ì¬ë“±ì¥**

ì™œ ì´ëŸ° ë¬¸ì œê°€ ë°œìƒí•˜ê³  ìˆëŠ”ê±¸ê¹Œ?

## ì„¤ê³„ëœ í™”ë©´ì˜ íë¦„

ë³¸ê²©ì ì¸ ë¬¸ì œì˜ í•´ê²°ì— ì•ì„œ ì„¤ê³„ëœ í™”ë©´ì´ ì–´ë–¤ íë¦„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ”ì§€ë¥¼ ì•Œì•„ì•¼ í•œë‹¤.

![36-2](../.vuepress/assets/snack/36-2.jpeg)

1. í¬ì¦ˆí”¼ë“œ ë£¨íŠ¸ ë·°ì—ì„œ ì´ë¯¸ì§€ ì…€ì„ íƒ­í•˜ë©´ í¬ì¦ˆ ìƒì„¸ì •ë³´ë¥¼ í‘œê¸°í•˜ëŠ” ë·°ê°€ ëª¨ë‹¬ í˜•íƒœë¡œ `present` ëœë‹¤.
2. ì´ë¯¸ì§€ì™€ ê´€ë ¨ëœ íƒœê·¸ì •ë³´ë“¤ì„ ì„œë²„ë¡œë¶€í„° ë°›ì•„ì™€ ì»¬ë ‰ì…˜ë·°ê°€ êµ¬ì„±ëœë‹¤.
3. ì´ë¯¸ì§€ ê´€ë ¨ íƒœê·¸ ì…€ì„ íƒ­í•˜ë©´ í¬ì¦ˆ ìƒì„¸ ë·°ê°€ dismissë˜ê³  íƒœê·¸ ì •ë³´ê°€ **í¬ì¦ˆí”¼ë“œ ë£¨íŠ¸ë·°ë¥¼ ê±°ì³ í¬ì¦ˆí”¼ë“œ í•„í„° ë·°ë¡œ ì „ë‹¬ëœë‹¤.**
4. í¬ì¦ˆí”¼ë“œ ë£¨íŠ¸ ë·°ì— í¬ì¦ˆ ìƒì„¸ ë·°ì—ì„œ íƒ­í•œ íƒœê·¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§ì´ ì§„í–‰ëœë‹¤.
5. UI ë°”ì¸ë”©ì´ ë‹¨ë°©í–¥ìœ¼ë¡œ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì— **í¬ì¦ˆí”¼ë“œ ë£¨íŠ¸ ë·°ì˜ í•„í„° ì»¬ë ‰ì…˜ë·°ëŠ” ë°˜ë“œì‹œ í¬ì¦ˆí”¼ë“œ í•„í„° ë·°ì˜ íƒœê·¸ ì •ë³´ê°’ë“¤ì„ ì˜µì €ë²„ë¸” í˜•íƒœë¡œ ê°€ì§€ê³  ìˆì„ë•Œ í•´ë‹¹ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ëœë‹¤.**

5ë²ˆ ê³¼ì •ì´ ë¬¸ì œì˜ í•µì‹¬ì´ë‹¤. í¬ì¦ˆí”¼ë“œì˜ ë£¨íŠ¸ ë·°ëŠ” í•„í„°ì— ëŒ€í•œ ì •ë³´ë¥¼ í¬ì¦ˆí”¼ë“œ ë£¨íŠ¸ ë·°ëª¨ë¸ì— ê°€ì§€ê³  ìˆì§€ ì•Šê³  **í¬ì¦ˆí”¼ë“œ í•„í„°ì—ì„œ ë°©ì¶œí•˜ëŠ” ì˜µì €ë²„ë¸”ë¡œë¶€í„° ë°”ì¸ë”©ì„ ì§„í–‰í•˜ëŠ” ê²ƒì´ë‹¤.**

ëª¨ë‹¬ì°½ì„ ë³´ë©´ ì¸ì› ìˆ˜, í”„ë ˆì„ ìˆ˜, ë©”ì¸ íƒœê·¸ë“¤ì„ ì§€ì •í•˜ëŠ” ì˜ì—­ì´ ìˆëŠ”ë° ê° íƒœê·¸ ì†ì„±ë§ˆë‹¤ ì—´ê±°í˜•ìœ¼ë¡œ ì§ì ‘ íƒ€ì…í™”ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ëª¨ë“  íƒœê·¸ ì •ë³´ë“¤ì„ í¬ì¦ˆí”¼ë“œ í•„í„° ë·°ëª¨ë¸ì—ì„œ `Observable.combineLatest`ë¡œ ì¢…í•©í•œ ì´í›„ì˜ íƒœê·¸ ì •ë³´ë¥¼ í¬ì¦ˆí”¼ë“œ ë£¨íŠ¸ ë·°ì™€ í¬ì¦ˆí”¼ë“œ í•„í„° ë·°ì— ê°ê° ë¿Œë ¤ì£¼ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

![36-3](../.vuepress/assets/snack/36-3.jpeg)

ë¬¸ì œëŠ” í¬ì¦ˆ ìƒì„¸ ë·°ì—ì„œ íƒœê·¸ë¥¼ íƒ­í•˜ì—¬ í¬ì¦ˆí”¼ë“œ í•„í„° ë·°ë¡œ ì„ íƒëœ íƒœê·¸ ì •ë³´ë¥¼ ì „ë‹¬í•  ë•Œì— **í¬ì¦ˆí”¼ë“œ í•„í„° ë·° ê°ì²´ê°€ ë©”ëª¨ë¦¬ ìƒì— ì˜¬ë¼ì™€ìˆëŠ”ì§€ ì—¬ë¶€ëŠ” ìƒê´€í•˜ì§€ ì•Šê³  ë°ì´í„° ì „ë‹¬ì„ ì‹œë„í•œë‹¤ëŠ” ê²ƒì´ë‹¤.**

í¬ì¦ˆí”¼ë“œ í•„í„° ë·°ì—ì„œëŠ” í•„í„° ë·° ìì²´ ì…€ë ‰ì…˜ê³¼ ë”ë¶ˆì–´ ê°ì¢… UI ë°”ì¸ë”©ì„ ì²˜ë¦¬í•˜ëŠ” ì‘ì—…ì´ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ì˜ `bindViewModel` í•¨ìˆ˜ì—ì„œ ì´ë£¨ì–´ì§„ë‹¤.

ìƒì„¸ ë·°ë¡œë¶€í„° `accept`ë˜ëŠ” ì„œë¸Œíƒœê·¸ ì •ë³´ëŠ” í¬ì¦ˆí”¼ë“œ í•„í„° ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì €ì¥ì†ì„± `BehaviorRelay`ë‚´ì— ì €ì¥ëœë‹¤. ì½”ë””ë„¤ì´í„°ë¥¼ í†µí•´ í¬ì¦ˆ ìƒì„¸ ë·°ì—ì„œ í¬ì¦ˆí”¼ë“œ í•„í„° ë·° ë¦´ë ˆì´ ê°ì²´ì— íƒœê·¸ì •ë³´ê°’ì´ ì €ì¥ì€ ë˜ì§€ë§Œ **bindViewModel í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì§€ ì•Šì€ ìƒíƒœì´ê¸° ë•Œë¬¸ì— ê°ì¢… ì…€ë ‰ì…˜ê³¼ ê°™ì€ ë°˜ì‘í˜• ë™ì‘ë“¤ì´ êµ¬ë…ë˜ì§€ ì•Šì€ ìƒíƒœì¸ ê²ƒì´ë‹¤.**

í¬ì¦ˆí”¼ë“œ ë£¨íŠ¸ ë·° ìƒë‹¨ì˜ í•„í„° ì»¬ë ‰ì…˜ ë·° ì…€ì˜ íƒ­ì€ **í¬ì¦ˆí”¼ë“œ í•„í„° ë·°ëª¨ë¸ë¡œ í˜„ì¬ íƒœê·¸ ì •ë³´ë“¤ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ì¸í’‹ìœ¼ë¡œì¨ ì‚¬ìš©ëœë‹¤.** ëª¨ë‹¬ì°½ì„ ì§ì ‘ ë„ìš°ì§€ ì•ŠëŠ” ì´ìƒ í¬ì¦ˆí”¼ë“œ í•„í„°ë·°ì˜ ì˜µì €ë²„ë¸”ë“¤ì´ êµ¬ë…ë˜ì§€ ì•Šì€ ìƒíƒœì´ê¸°ì— í¬ì¦ˆí”¼ë“œ ë£¨íŠ¸ë·° ì´ˆê¸° ì§„ì…ì´í›„ì— **ëª¨ë‹¬ì°½ì„ ë„ìš°ì§€ ì•Šì€ ìƒíƒœì—ì„œ ì„œë¸Œíƒœê·¸ì˜ ì¶”ê°€ì™€ ì‚­ì œê°€ ì´ë£¨ì–´ì ¸ë„ ê·¸ ë‹¤ìŒ ìƒˆë¡œ íƒœê·¸ë¥¼ ì„ íƒí–ˆì„ë•Œ ì‚­ì œí–ˆë˜ íƒœê·¸ê°€ ë‹¤ì‹œ ë˜ì‚´ì•„ë‚˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì´ëŠ” ê²ƒì´ë‹¤.**

## loadViewIfNeeded ì˜ í™œìš©

ë³µì¡í•˜ê²Œ ì„œìˆ ëœ ìœ„ì˜ ë¬¸ì œë¥¼ ê°„ë‹¨íˆ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

1. ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì— í‘œê¸°í•  ë°ì´í„°ë“¤ì„ ì˜µì €ë²„ë¸” í˜•íƒœë¡œ ì •ì˜í•´ë‘” ë·°ëª¨ë¸ì„ êµ¬ë…í•´ì•¼ë§Œ ë°˜ì‘í˜• ë¡œì§ì´ ì²˜ë¦¬ë˜ê¸° ì‹œì‘í•œë‹¤.
2. ì˜µì €ë²„ë¸” êµ¬ë…ì„ ì „ì²´ì ìœ¼ë¡œ ì§„í–‰í•˜ëŠ” ë·° ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ì˜ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ì¸í’‹ ë°ì´í„°ê°€ ì£¼ì–´ì§„ ìƒí™©ì´ë‹¤.
3. ì¸í’‹ ë°ì´í„°ê°€ ì£¼ì–´ì§€ê¸° ì „ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ì˜ í•¨ìˆ˜ë¥¼ ë¡œë“œí•˜ì—¬ í˜¸ì¶œí•˜ë©´ ë¬¸ì œê°€ í•´ê²°ëœë‹¤.

loadViewIfNeededì˜ ì„¤ëª…ì„ ë³´ì.

> Discussion: Calling this method loads the view controllerâ€™s view from its storyboard file, or creates the view as needed based on the established rules.

ë©”ëª¨ë¦¬ ìƒì— ë·° ì»¨íŠ¸ë¡¤ëŸ¬ ê°ì²´ ìì²´ëŠ” ì˜¬ë¼ì™€ ìˆëŠ” ìƒíƒœì´ì§€ë§Œ ë·°ê°€ lazyí•˜ê²Œ ë¡œë“œëœë‹¤ëŠ” íŠ¹ì„± ë•Œë¬¸ì— ë‚´ë¶€ í•¨ìˆ˜ë“¤ì´ í˜¸ì¶œë˜ì§€ ì•ŠëŠ” ìƒíƒœì´ê¸° ë•Œë¬¸ì—, ì½”ë””ë„¤ì´í„°ì—ì„œ ë·°ê°€ ë¡œë“œë˜ê¸° ì´ì „ ì‹œì ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ê²½ìš° `loadViewIfNeeded` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì£¼ëŠ” ê²ƒì´ë‹¤.

```swift
// PoseFeedCoordinator.swift
func dismissPoseDetailWithTagSelection(tag: String) {
    guard let posefeedViewController = self.navigationController.viewControllers.first as? PoseFeedViewController else { return }

    // ì…€ë ‰ì…˜ ì´ˆê¸°í™”
    self.poseFeedFilterViewController.loadViewIfNeeded() // ì˜µì €ë²„ë¸”ë“¤ êµ¬ë… ì§„í–‰

    // ....
    // ....
}
```

```swift
// PoseFeedFilterViewController.swift
// loadViewIfNeededë¥¼ í†µí•´ bindViewModelí•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´
// ë·°ëª¨ë¸ë¡œë¶€í„° ë§Œë“¤ì–´ì§„ ê°ì¢… ì˜µì €ë²„ë¸”ë“¤ì´ êµ¬ë…ì²˜ë¦¬ëœë‹¤.
override func bindViewModel() {
    let input = PoseFeedFilterViewModel.Input(headCountSelection: headCountSelection.buttonTapTrigger.asObservable(), frameCountSelection: frameCountSelection.buttonTapTrigger.asObservable(), tagSelection: tagCollectionView.rx.modelSelected(PoseFeedFilterCellViewModel.self).asObservable(), registeredSubTag: registeredSubTag, tagSelectCanceled: cancelTrigger.asObservable(), isPresenting: isPresenting.asObservable(), resetButtonTapped: resetButton.rx.tap, dismissState: dismissState.asObservable(), viewWillDisappearTrigger: viewWillDisappearTrigger.asObservable(), countTagRemoveTrigger: countTagRemoveTrigger.asObservable(), filterTagRemoveTrigger: filterTagRemoveTrigger.asObservable(), subTagRemoveTrigger: subTagRemoveTrigger, detailViewDismissTrigger: detailViewDismissTrigger, filteredTagAfterDismiss: filteredTagAfterDismiss.asObservable())

    let output = viewModel.transform(input: input)

    output.tagItems
        .drive(tagCollectionView.rx.items(cellIdentifier: PoseFeedFilterCell.identifier, cellType: PoseFeedFilterCell.self)) { _, viewModel, cell in
            cell.bind(to: viewModel)
        }
        .disposed(by: disposeBag)

    output.headCountTag
        .drive(onNext: { [unowned self] in
            self.headCountSelection.pressIndex.accept($0)
            guard let headCountTag = PeopleCountTags.getTagFromTitle(title: self.headCountSelection.buttonGroup[$0]) else { return }
            self.selectedHeadCount.accept(headCountTag)
        })
        .disposed(by: disposeBag)

    output.frameCountTag
        .drive(onNext: { [unowned self] in
            self.frameCountSelection.pressIndex.accept($0)
            guard let frameCountTag = FrameCountTags.getTagFromTitle(title: self.frameCountSelection.buttonGroup[$0]) else { return }
            self.selectedFrameCount.accept(frameCountTag)
        })
        .disposed(by: disposeBag)

    output.registeredTags
        .drive(onNext: { [unowned self] in
            self.selectedTags.accept($0)
        })
        .disposed(by: disposeBag)

    subTagRemoveTrigger
        .subscribe(onNext: { [unowned self] in
            self.registeredSubTag.accept(nil)
        })
        .disposed(by: disposeBag)

    tagCollectionView.updateCollectionViewHeight()
}
```

## Reference

1. [ë·° ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ê³„ ì½”ë“œ](https://github.com/pose-picker/PosePicker-iOS/blob/main/posepicker/Modules/PoseFeed/PoseFeedViewController.swift)
