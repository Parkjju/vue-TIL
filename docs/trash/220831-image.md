---
title: Snack 8호 - React 이미지 데이터 전송하기
---

브라우저에서 백엔드로 이미지 전송을 위해서는 고려해야할 부분이 크게 두 가지가 있습니다.

1. UI를 어떻게 그려줄지에 대한 고민
2. 전송 데이터 형태에 대한 고민

일반적으로 서비스에서 이미지 추가 및 서버로의 전달을 위한 UI를 그린다고 할때 기본적으로 제공되는 `input`태그를 사용하는 것은 사용자 입장에서 매력을 느끼기 어려운 것 같습니다.

인풋태그에 이미지 타입을 file로 설정하여 파일객체를 보여주는 방법보다 **업로드할 이미지를 미리보기 형태로 제공하는 것이** 사용자 경험에 더 긍정적인 영향을 줄 것입니다.

## 이미지 미리보기

인풋태그에 삽입할 이미지를 미리보기로 띄우기 위해 할 일은 크게 세 가지 정도로 정리됩니다.

1. `input`태그 생성, 타입 프롭스는 file로 지정하고 onChange 이벤트 등록하기
2. label 태그를 통해 인풋태그를 가리키기
3. 이미지 formData 객체를 갖는 상태값을 생성하여 컴포넌트 렌더링으로 전달하기

먼저 다음과 같은 형태로 인풋태그를 생성합니다.

```javascript
<input
    onChange={onChange}
    type='file'
    id='label에 연결할 아이디 프롭스'
    accept='image/*'
/>
```

인풋태그가 `type="file"`로 생성되면 파일을 업로드 할 수 있는 버튼이 하나 생깁니다. 파일선택 버튼 클릭 후 `accept`프롭스에 지정된 파일형식에 맞는 이미지를 첨부합니다.

이때 `onChange` 이벤트가 트리거 되어 전달된 함수가 실행됩니다. `onChange` 함수의 이벤트 파라미터에서 이미지 객체만 pick해오기 위해서는 `e.target.files`를 살펴보면 됩니다.

하나의 파일 첨부 후에 `e.target.files` 객체의 0번째 인덱스를 살펴보면 `File` 오브젝트가 새롭게 할당된 것을 볼 수 있습니다.

[File](../.vuepress/assets/file.png)

:::warning File 객체 출력하기
인풋태그를 통해 생성된 File 객체를 `console.log`에 전달하여 출력하려고 하면 빈 객체만 출력되게 됩니다.

File 객체 실제 내부 데이터는 이진 데이터 등 실제 출력 가능한 형태의 데이터가 아니기 때문입니다. 오브젝트에 대한 키값 및 밸류값 순회 메서드를 통해 출력해야 합니다.
:::

이 File 오브젝트 자체로 서버에 전달할 수도 있겠지만 이는 데이터 손실의 위험성이 존재하여, 사이즈 압축과 더불어 base64 형태의 문자열로 파싱하여 서버로 업로드해야합니다.

```javascript
const onChange = (e) => {};
```
