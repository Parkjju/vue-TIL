---
title: Google Cloud Platform - Get Certified Program (Resources and Access in the Cloud)
---

## Resource hierarchy

GCP 리소스는 계층이 존재한다. 1번부터 순서대로 하위 -> 상위 계층으로 올라간다.

1. Resources: VM을 가리킨다. 클라우드 스토리지 버킷, VPCs(Virtual Private Networks), 빅쿼리 테이블 등
2. Projects: 프로젝트는 리소스들로 구성된다.
3. Folders: 폴더는 프로젝트들로 구성된다.
4. Organization node: 조직 노드는 리소스, 프로젝트, 폴더 전체를 감싸는 최상위 계층이다.

이러한 리소스 계층은 구글 클라우드에서 정책들이 어떻게 관리되는 지와 깊게 관련되어 있기 때문에 중요한 개념이다.

정책은 **프로젝트, 폴더, 조직 노드에서 정의될 수 있다.** 특정 구글 클라우드 내 서비스 중에서는 리소스 단위까지 정책을 적용할 수도 있다. 정책은 하위 계층에 상속된다.

## Projects

프로젝트는 구글 클라우드 서비스 사용 및 관리(API 관리, 비용 관리, 콜라보레이터 추가 및 삭제...)를 위한 기초 단위이다. 각 프로젝트는 독립적이고 각 리소스는 하나의 프로젝트에만 속해있다. 프로젝트별로는 소유자 및 사용자를 설정할 수 있다. 비용 청구 또한 프로젝트 단위로 이루어진다.

프로젝트는 세개의 식별자 속성을 갖는다.

1. project ID: 구글에 의해 할당되는 글로벌하게 유니크한 식별자이다. 생성 이후에는 변경될 수 없는 속성이다.
2. project names: 유저가 직접 설정하는 프로젝트 이름이다. 유니크할 필요가 없고, 생성 이후에도 자유롭게 수정 가능하다.
3. project number: 리소스 추적을 위해 구글 클라우드 내부적으로 사용하는 값이다. 글로벌하게 유니크하고, 불변값이다.

프로젝트 관리는 구글 클라우드에서 제공하는 `Resource Manager`툴을 통해 이루어진다. 해당 툴은 계정과 관련된 프로젝트 리스트를 조회하고, 새로운 프로젝트를 생성하고, 삭제하고, 복구하는 등의 작업을 할 수 있는 API이다. 코드 기반으로 관리가 가능하다. CLI, 코드, 파이프라인 등으로 연동 가능하고 RPC / REST API 형태로 제공된다. (대규모 프로젝트 관리 시 유용)

## Folders

폴더는 정책 적용과 조직화에 있어서 강력한 역할을 한다. IAM과 조직 정책을 세분화(granularity) 할 수 있다.

```text
Organization Node (your-company.com)
└── Folder: Product Department (IAM: Engineers Read/Write)
    ├── Folder: Mobile Team (IAM: Mobile Devs Admin)
    │   └── Project: mobile-backend-prod
    │   └── Project: mobile-analytics
    ├── Project: web-frontend
```

리소스는 폴더에 설정된 정책들을 상속받는다. 두개의 프로젝트가 하나의 폴더에 속해 있다면 해당 폴더의 정책들을 상속받지만, 해당 폴더와 동일 계층에 존재하는 다른 폴더에 속한 프로젝트들은 상속받지 않도록 설계할 수 있다.

폴더 사용을 위해서는 최상위 계층인 조직 노드를 사용해야 한다.

## Organization node

조직 노드에는 특수한 역할이 있는데, 바로 조직 정책 관리자(Organization policy administrator)이다. 해당 역할을 부여 받은 유저만이 정책을 변경할 수 있다.

프로젝트 생성자 (Project creator) 역할도 지정할 수 있다. 프로젝트 생성 권한을 주는 것이고, 이에 따라 비용을 누가 발생시켰는지 확인할 수 있다. (프로젝트 단위로 비용이 발생하기 때문)

조직 노드를 생성하는 방법은 회사가 구글 워크스페이스 고객인지 여부에 따라 달려있다. 워크스페이스 사용자면 구글 클라우드가 자동으로 조직 노드를 할당해주고, 워크스페이스를 사용하지 않는다면 Cloud Identity를 통해 조직 노드를 생성할 수 있다.

워크스페이스 기존 사용자들은 조직 노드 생성과 동시에 프로젝트 생성 권한이 할당된다. 이후 폴더 생성을 통해 워크스페이스 내 사용자들에 대한 권한 관리가 가능하다.

## IAM (Identity and Access Management)

조직 노드가 많은 폴더, 프로젝트, 리소스를 보유하면 누가 어떤 곳에 접근 가능할지 제한할 필요가 있다는 것을 의미한다. 이러한 태스크를 처리하기 위해 관리자는 IAM을 활용할 수 있다. IAM을 통해 **누가** 어떤 리소스에 접근하여 **무엇을 할 수 있는지** 정의할 수 있다.

-   IAM 정책의 WHO: 구글 계정, 구글 그룹, 서비스 계정, Cloud Identity domain이 될 수 있다. 이를 주체(principal)라고 지칭하고 일반적으로 이메일 형식의 식별자를 갖는다.
-   IAM 정책의 can do WHAT: 역할(role)로 정의된다. IAM에서 역할은 여러 권한의 묶음을 의미한다. 하나의 주체에게 역할을 부여하면 해당 역할과 관련된 권한들을 모두 승인하게 된다.

주체가 리소스 계층의(조직 노드, 폴더, 프로젝트 등) 특정 요소에서 역할을 받게 되면 하위 계층의 모든 요소에도 적용된다.

역할이 갖는 허용 권한 기본 설정과 상관없이 특정 주체에 대해서 권한을 막을 수 있다. 거부된 권한 역시 하위 계층 모든 요소에 적용된다. **IAM은 허용 권한 규칙 확인 이전에 거부 권한 규칙부터 확인한다.**

## IAM roles

IAM은 basic, predefined, custom 세 종류의 역할이 존재한다.
