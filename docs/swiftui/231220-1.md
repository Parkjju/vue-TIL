---
title: SwiftUI - 프로젝트 구조
---

## App

SwiftUI 기반으로 프로젝트를 생성하면 다음과 같이 기본적으로 앱의 진입점이 되는 구조체가 정의된다.

```swift
import SwiftUI

@main
struct swiftui_playgroundApp: App {
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}
```

`@main` 키워드를 통해 컴파일러가 메인함수를 합성한다. `App` 프로토콜을 채택하며 필수 구현 대상으로 `body` 속성이 있다. `body` 속성은 `Scene`프로토콜을 채택한 Scene 객체이다. Scene은 뷰 계층을 담고 있는 컨테이너이다. 뷰를 표시하는 시점 등을 조절한다.

`WindowGroup`은 기본적으로 제공되는 씬 중 하나이며 윈도우그룹 내에서 실행할 화면을 리턴하여 초기 화면이 결정된다.

## Scene

씬은 뷰 계층을 담고 있는 컨테이너이며, 플랫폼과 현재 앱 상태에 따라서 뷰 계층을 표시하는 시점, 방식을 자동으로 결정해준다.

씬 레벨에서 할 수 있는 일은 다음과 같은 것들이 있다.

1. 코드 가독성을 위해 커스텀 씬을 구현한다.
2. 씬의 상태에 따라 원하는 작업을 실행한다.

커스텀 씬을 구현할 때에는 `Scene` 프로토콜을 채택하고 Scene 프로토콜을 채택한 `body`속성을 구현해주면 된다.

```swift
@main
struct swiftui_playgroundApp: App {
    var body: some Scene {
//        WindowGroup {
//            ContentView()
//        }
        MyScene() // 커스텀 씬 리턴
    }
}

// 커스텀 씬 정의
struct MyScene: Scene {
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}
```

씬의 단계를 처리하는 코드는 다음과 같다.

```swift
struct MyScene: Scene {
    @Environment(\.scenePhase) private var scenePhase

    var body: some Scene {
        WindowGroup {
            ContentView()
        }
        .onChange(of: scenePhase) { oldValue, newValue in
            print(oldValue, newValue)
        }
    }
}
```

씬 페이지라는 시스템 객체를 사용하며 `@Environment` 키워드를 통해 구현하며, 씬의 `onChange` 함수에 씬 페이지 객체를 전달한 뒤 클로저 파라미터를 통해 씬 상태 변화를 체크할 수 있다.

씬은 크게 `active`, `inactive`, `background` 세 가지 속성을 갖는다.

:::tip KeyPath 문법

스위프트에서는 키패스 문법을 제공한다.

:::
