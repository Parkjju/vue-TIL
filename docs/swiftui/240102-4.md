---
title: SwiftUI - Presentation
---

## Alert

SwiftUI 에서 제공하는 알럿창을 사용해본다. 기존에는 `Alert` 생성자를 통해 직접 호출하는 방식이었다면 iOS15 이후부터는 `.alert` 모디파이어 내에서 처리하게 된다.

```swift
struct Alert_Tutorials: View {
    @State private var message = ""
    @State private var showAlert = false

    var body: some View {
        VStack {
            Text(message)
                .font(.largeTitle)

            Button {
                showAlert = true
            } label: {
                Text("Show Alert")
            }
            .padding()
            .alert("경고창", isPresented: $showAlert) {
                // 1. 확인버튼
                Button("확인") {
                    message = "확인"
                }

                // 2. 취소버튼
                Button(role: .cancel) {
                    message = "취소"
                } label: {
                    Text("취소")
                }
            } message: {
                Text("조심하세요!")
            }
        }
    }
}
```

`.alert` 모디파이어는 위치에 구애받지 않고, `@State`를 기반으로 로직 설계만 정상적으로 이루어지면 모든 뷰에 모디파이어로 등록해도 된다.

다만 통상적인 경우 다음과 같은 위치에서 alert 모디파이어를 호출한다.

1. 알럿창의 트리거가 되는 곳 (버튼 등)
2. 트리거 로직 설계가 애매한 경우 취상위 컨테이너

만약 알럿창이 참조하는 데이터가 있는 경우 클로저 바깥의 특정 값을 가리키는 형태보다 `presenting` 파라미터를 갖는 `alert` 모디파이어를 호출하는 것이 좋다.

```swift
// presenting parameter!
.alert("경고", isPresented: $showImageAlert, presenting: imageData) { data in
    Button("필터 적용") {
        message = data.filters.joined(separator: ", ") + "필터를 적용합니다."
    }

    Button(role: .cancel) {
        message = "취소"
    } label: {
        Text("취소")
    }
} message: { data in
    Text("\(data.name) 파일에서 어떤 작업을할까요? \n촬영일자\(data.date)")
}
```

`presenting` 파라미터에 데이터를 전달하면 알럿 액션 클로저의 파라미터로 데이터가 전달된다.

## Confirmation Dialog

컨퍼메이션 다이얼로그는 하단에 노출되며 여러 선택지들 중 하나를 고를 때 사용하는 UI이다.

```swift
.confirmationDialog("컬러 선택", isPresented: $showDialog) {
    Button("Red") {
        color = .red
    }

    Button("Green") {
        color = .green
    }

    Button("Blue") {
        color = .blue
    }

    Button(role: .cancel) {

    } label: {
        Text("취소")
    }

    Button(role: .destructive) {
        color = .black
    } label: {
        Text("초기화")
    }

} message: {
    Text("원하는 컬러를 선택해주세요")
}
```

동작 자체는 알럿 모디파이어와 거의 동일하다. 뷰를 띄우는 바인더 속성 및 메세지, 내부 컴포넌트들을 정의하면 된다. `visibility` 파라미터는 플랫폼별로 기본적으로 제공하는 형태가 달라지므로 굳이 파라미터 지정까지 할 필요는 없다.

`confirmationDialog`는 내부에 선택지가 여러개 들어가므로 버튼 컴포넌트가 중복되어 들어가는 코드가 작성된다. 이를 개선하기 위해 `Identifiable` 프로토콜을 채택한 모델을 새로 정의한 뒤 `ForEach`를 사용하여 구현하면 좋다.

![4-1](../.vuepress/assets/swiftUI/4-1.png)

```swift
.confirmationDialog("컬러 선택", isPresented: $showDialog, presenting: ColorData.samples) { colors in
    // ForEach 활용
    ForEach(colors) { item in
        Button(item.title) {
            color = item.color
        }
    }

    Button(role: .cancel) {

    } label: {
        Text("취소")
    }

    Button(role: .destructive) {
        color = .black
    } label: {
        Text("초기화")
    }

} message: { _ in
    Text("원하는 컬러를 선택해주세요")
}
```
