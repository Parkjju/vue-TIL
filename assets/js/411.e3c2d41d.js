(window.webpackJsonp=window.webpackJsonp||[]).push([[411],{972:function(t,s,a){"use strict";a.r(s);var e=a(6),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("ul",[s("li",[s("p",[t._v("자동 투자 봇 프로젝트 클론코딩 정리내용 중 부족한 부분이 있어서 보충함")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://github.com/Parkjju/TIL/blob/master/Projects/investing_bot/Chapter4/database_on.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("210305 / 트레이딩 봇 클론코딩 - 데이터베이스 연동하기"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("파이썬 코드에서 Database와 연결하기 위한 라이브러리 중 SQLAlchemy라는 라이브러리가 있다.")])]),t._v(" "),s("li",[s("p",[t._v("클래스를 사용하여 DB TABLE들을 표현하고 CRUD를 할 수 있도록 해줌")])])]),t._v(" "),s("h3",{attrs:{id:"sqlalchemy-설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sqlalchemy-설치"}},[t._v("#")]),t._v(" SQLAlchemy 설치")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("pycharm에서 설치하였음 // 파이썬 패키지 매니저를 통해 설치 (pip)")])]),t._v(" "),s("li",[s("p",[t._v("SQLAlchemy 설치 후 해당 라이브러리의 pymysql을 import!")])])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("$ pip install sqlalchemy\n$ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pymysql\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mysql db 와의 호환을 위해 아래 함수 호출")]),t._v("\n$ pymysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("install_as_MySQLdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[t._v("pymysql이란? "),s("strong",[t._v("Python 전용 데이터베이스 커넥터를 뜻한다.")]),t._v(" Python 프로그램이 MYSQL 서버와 통신할 수 있게 만들어주는 라이브러리.")])]),t._v(" "),s("h3",{attrs:{id:"create-engine-import"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-engine-import"}},[t._v("#")]),t._v(" create_engine import")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("SQLAlchemy가 DB에 접근하려면, DB 접속 정보를 알아야함.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("이러한 접속 정보를 받아서 연결을 관리하는 객체가 Engine")])])])]),t._v(" "),s("ul",[s("li",[t._v("파이썬을 통한 mysql 접근을 하기 위해 진행하는 데이터베이스 설정은 다음과 같다.")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sqlalchemy "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_engine\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" engine "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysql+mysqldb://"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" db_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" db_passwd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@"')]),t._v("\n                                        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" db_ip "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" db_port "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" db_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" encoding"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[t._v("Connecting String")])]),t._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mysql+pymysql://&lt;username>:&lt;password>@&lt;host>/&lt;dbname>[?&lt;options>]\n")])])]),s("ul",[s("li",[t._v("db_id, db_password 등은 위의 클론 프로젝트 정리 내용에서 정의한 변수명이다.")])]),t._v(" "),s("h3",{attrs:{id:"collector-py-파일-실행-시-데이터-베이스의-연결-정보를-저장할-내용-만들기-name-main-기반"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#collector-py-파일-실행-시-데이터-베이스의-연결-정보를-저장할-내용-만들기-name-main-기반"}},[t._v("#")]),t._v(" collector.py 파일 실행 시 데이터 베이스의 연결 정보를 저장할 내용 만들기 "),s("strong",[t._v("name")]),t._v('="'),s("strong",[t._v("main")]),t._v('"기반')]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("db "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    db_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'database_name'")]),t._v("\n    db_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql id'")]),t._v("\n    db_ip "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 자신의 로컬컴퓨터")]),t._v("\n    db_password "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql password'")]),t._v("\n    db_port "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3306'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"연동을-모두-마치고-기본적인-쿼리문을-실행해보기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#연동을-모두-마치고-기본적인-쿼리문을-실행해보기"}},[t._v("#")]),t._v(" 연동을 모두 마치고 기본적인 쿼리문을 실행해보기")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"select * from test1.class1;"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fetchall"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[s("p",[t._v("db연결시 create_engine 함수를 통해 생성한 engine 객체의 execute 메소드를 이용한다.")])]),t._v(" "),s("li",[s("p",[t._v("또한 fetchall 메소드를 통해 row들을 튜플 리스트로 받아온다.")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);