(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1114:function(t,a,s){"use strict";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"문제상황"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#문제상황"}},[t._v("#")]),t._v(" 문제상황")]),t._v(" "),a("p",[t._v("시계 앱을 클론하는 과정에서 코어데이터로부터 가져온 데이터를 가지고 CRUD중 Update에 해당하는 로직 구현이 필요했다.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(521),alt:"18-1"}})]),t._v(" "),a("p",[t._v("스토리보드로 테이블 뷰 셀과 디테일 뷰 컨트롤러를 연결해두었고, 데이터 전달을 위해 performSegue 호출 이전에 자동으로 세그웨이 destination 뷰 컨트롤러에 데이터 세팅을 해주는 prepare 메서드를 오버라이딩 하는 중이었다.")]),t._v(" "),a("p",[t._v("destination 뷰 컨트롤러를 커스텀 클래스로 타입캐스팅 해준 뒤 내부 UI 요소들에 접근해야 했는데, 위의 사진에서 볼 수 있듯 디테일 뷰 컨트롤러 내부에 여러 UI 요소들에 직접 접근하여 데이터를 세팅해야 하는 상황이었다.")]),t._v(" "),a("p",[t._v("사실, 디테일 뷰 컨트롤러에 대해 destination 뷰 컨트롤러 타입캐스팅 후 직접 저장속성을 세팅해주면 코드 자체로는 정상적으로 동작하게 된다. 무엇이 문제가 되는지 다시 살펴보자.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(522),alt:"18-2"}})]),t._v(" "),a("p",[t._v("화면이 한번 깜빡인 뒤에 데이터가 세팅되는 것처럼 보인다. 위와 같은 현상이 벌어지는 이유는 뷰 컨트롤러 내의 UI 요소들이 인스턴스 생성이 이루어지지 않은 상태에서 내부 프로퍼티에 접근하려고 할때 nil값에 대한 접근으로 인식되어 "),a("strong",[t._v("모든 UI가 생성되는 화면의 생명주기 단계에서 데이터 세팅을 해줘야 하기 때문이다.")])]),t._v(" "),a("p",[a("code",[t._v("viewDidAppear")]),t._v(" 메서드를 뷰 컨트롤러 내에 오버라이딩 하여 모든 스토리보드 기반 UI들이 인스턴스로 생성되었을 때에 내부 속성에 접근하여 데이터를 세팅하다 보니 잠깐의 텀이 사용자에게 노출되는 것이다.")]),t._v(" "),a("h2",{attrs:{id:"loadviewifneeded"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loadviewifneeded"}},[t._v("#")]),t._v(" loadViewIfNeeded()")]),t._v(" "),a("p",[t._v("이때 사용되는 것이 바로 "),a("code",[t._v("loadViewIfNeeded()")]),t._v("라는 메서드이다.")]),t._v(" "),a("p",[t._v("위 상황에서 이전 뷰 컨트롤러에서 디테일 뷰 컨트롤러로 데이터를 전달하며 UI 내부 프로퍼티를 조작할 때에 "),a("code",[t._v("prepare")]),t._v(" 메서드가 어떻게 호출되는지 살펴보자.")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("prepare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" segue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UIStoryboardSegue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sender"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Any")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" segue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("identifier "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AlarmViewController"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" indexPath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("indexPathForSelectedRow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("guard")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" destinationNavigationVC "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" segue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("destination "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AlarmGenerateNavigationController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("guard")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" destinationVC "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" destinationNavigationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("viewControllers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AlarmGenerateViewController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        destinationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alarmData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" alarmData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("indexPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 여기!")]),t._v("\n        destinationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadViewIfNeeded")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// UI를 조작하는 커스텀 코드")]),t._v("\n        destinationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datePicker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alarmData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("indexPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" animated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        destinationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reloadData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setupRepeatCell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("generateTableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" destinationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" alarm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" alarmData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("indexPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setupLabelCell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("generateTableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" destinationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" alarm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" alarmData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("indexPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setupSoundCell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("generateTableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" destinationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" alarm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" alarmData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("indexPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setupAgainCell")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("generateTableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" destinationVC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tableView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" alarm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" alarmData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("indexPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("스토리보드 구조 상 구현 형태가 각자마다 달라지게 되겠지만, 위 코드에서 중요한 것은 "),a("code",[t._v("destinationVC.loadViewIfNeeded()")]),t._v(" 메서드가 호출되는 시점이다.")]),t._v(" "),a("p",[t._v("prepare메서드가 호출되는 시점에서 도착지 뷰 컨트롤러를 커스텀 클래스로 타입캐스팅 한 뒤 뷰 컨트롤러의 loadViewIfNeeded 메서드를 호출하게 되면 "),a("strong",[t._v("해당 뷰 컨트롤러 내부의 UI들이 인스턴스로 먼저 생성되게 된다.")])]),t._v(" "),a("p",[t._v("따라서 내부 UI의 프로퍼티를 PresentingViewController 단에서 직접적으로 조작할 수 있게 되는 것이다.")]),t._v(" "),a("h2",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[t._v("#")]),t._v(" Reference")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/56592213/testing-the-presented-uitableviewcell-in-a-uitableview",target:"_blank",rel:"noopener noreferrer"}},[t._v("Testing the presented UITableViewCell in a UITableView"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports},521:function(t,a,s){t.exports=s.p+"assets/img/18-1.474c2f14.gif"},522:function(t,a,s){t.exports=s.p+"assets/img/18-2.373674c1.gif"}}]);