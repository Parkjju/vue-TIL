(window.webpackJsonp=window.webpackJsonp||[]).push([[519],{1099:function(t,a,s){"use strict";s.r(a);var e=s(6),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("브라우저에서 백엔드로 이미지 전송을 위해서는 고려해야할 부분이 크게 두 가지가 있습니다.")]),t._v(" "),a("ol",[a("li",[t._v("UI를 어떻게 그려줄지에 대한 고민")]),t._v(" "),a("li",[t._v("전송 데이터 형태에 대한 고민")])]),t._v(" "),a("p",[t._v("일반적으로 서비스에서 이미지 추가 및 서버로의 전달을 위한 UI를 그린다고 할때 기본적으로 제공되는 "),a("code",[t._v("input")]),t._v("태그를 사용하는 것은 사용자 입장에서 매력을 느끼기 어려운 것 같습니다.")]),t._v(" "),a("p",[t._v("인풋태그에 이미지 타입을 file로 설정하여 파일객체를 보여주는 방법보다 "),a("strong",[t._v("업로드할 이미지를 미리보기 형태로 제공하는 것이")]),t._v(" 사용자 경험에 더 긍정적인 영향을 줄 것입니다.")]),t._v(" "),a("h2",{attrs:{id:"이미지-미리보기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#이미지-미리보기"}},[t._v("#")]),t._v(" 이미지 미리보기")]),t._v(" "),a("p",[t._v("인풋태그에 삽입할 이미지를 미리보기로 띄우기 위해 할 일은 크게 세 가지 정도로 정리됩니다.")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("input")]),t._v("태그 생성, 타입 프롭스는 file로 지정하고 onChange 이벤트 등록하기")]),t._v(" "),a("li",[t._v("label 태그를 통해 인풋태그를 가리키기")]),t._v(" "),a("li",[t._v("이미지 formData 객체를 갖는 상태값을 생성하여 컴포넌트 렌더링으로 전달하기")])]),t._v(" "),a("p",[t._v("먼저 다음과 같은 형태로 인풋태그를 생성합니다.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input\n    onChange"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file'")]),t._v("\n    id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'label에 연결할 아이디 프롭스'")]),t._v("\n    accept"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image/*'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("인풋태그가 "),a("code",[t._v('type="file"')]),t._v("로 생성되면 파일을 업로드 할 수 있는 버튼이 하나 생깁니다. 파일선택 버튼 클릭 후 "),a("code",[t._v("accept")]),t._v("프롭스에 지정된 파일형식에 맞는 이미지를 첨부합니다.")]),t._v(" "),a("p",[t._v("이때 "),a("code",[t._v("onChange")]),t._v(" 이벤트가 트리거 되어 전달된 함수가 실행됩니다. "),a("code",[t._v("onChange")]),t._v(" 함수의 이벤트 파라미터에서 이미지 객체만 pick해오기 위해서는 "),a("code",[t._v("e.target.files")]),t._v("를 살펴보면 됩니다.")]),t._v(" "),a("p",[t._v("하나의 파일 첨부 후에 "),a("code",[t._v("e.target.files")]),t._v(" 객체의 0번째 인덱스를 살펴보면 "),a("code",[t._v("File")]),t._v(" 오브젝트가 새롭게 할당된 것을 볼 수 있습니다.")]),t._v(" "),a("p",[a("a",{attrs:{href:"../.vuepress/assets/file.png"}},[t._v("File")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("File 객체 출력하기")]),t._v(" "),a("p",[t._v("인풋태그를 통해 생성된 File 객체를 "),a("code",[t._v("console.log")]),t._v("에 전달하여 출력하려고 하면 빈 객체만 출력되게 됩니다.")]),t._v(" "),a("p",[t._v("File 객체 실제 내부 데이터는 이진 데이터 등 실제 출력 가능한 형태의 데이터가 아니기 때문입니다. 오브젝트에 대한 키값 및 밸류값 순회 메서드를 통해 출력해야 합니다.")])]),t._v(" "),a("p",[t._v("이 File 오브젝트 자체로 서버에 전달할 수도 있겠지만 이는 데이터 손실의 위험성이 존재하여, 사이즈 압축과 더불어 base64 형태의 문자열로 파싱하여 서버로 업로드해야합니다.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onChange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);