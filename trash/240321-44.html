<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Snack 44호 - 포즈피커 프로젝트 클린 아키텍처 적용기 | Today I Learned</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="/vue-TIL/favicon.ico">
    <link rel="manifest" href="/vue-TIL/manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <link rel="apple-touch-icon" sizes="192x192" href="images/maskable_icon_x192.png">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-QP5LL1SE8Q"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-QP5LL1SE8Q');</script>
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/vue-TIL/assets/css/0.styles.7142d2c3.css" as="style"><link rel="preload" href="/vue-TIL/assets/js/app.e604b321.js" as="script"><link rel="preload" href="/vue-TIL/assets/js/2.63c1cf7f.js" as="script"><link rel="preload" href="/vue-TIL/assets/js/1.0419c474.js" as="script"><link rel="preload" href="/vue-TIL/assets/js/42.cfb62c74.js" as="script"><link rel="preload" href="/vue-TIL/assets/js/56.29eec45a.js" as="script"><link rel="prefetch" href="/vue-TIL/assets/js/10.832a0a98.js"><link rel="prefetch" href="/vue-TIL/assets/js/100.ee34a277.js"><link rel="prefetch" href="/vue-TIL/assets/js/101.9081c24b.js"><link rel="prefetch" href="/vue-TIL/assets/js/102.63cc862c.js"><link rel="prefetch" href="/vue-TIL/assets/js/103.aefaaf0a.js"><link rel="prefetch" href="/vue-TIL/assets/js/104.d0ea1cbb.js"><link rel="prefetch" href="/vue-TIL/assets/js/105.853f673c.js"><link rel="prefetch" href="/vue-TIL/assets/js/106.9a1b8158.js"><link rel="prefetch" href="/vue-TIL/assets/js/107.094f40fe.js"><link rel="prefetch" href="/vue-TIL/assets/js/108.f7afbc61.js"><link rel="prefetch" href="/vue-TIL/assets/js/109.66713527.js"><link rel="prefetch" href="/vue-TIL/assets/js/11.a9062ebf.js"><link rel="prefetch" href="/vue-TIL/assets/js/110.d7701759.js"><link rel="prefetch" href="/vue-TIL/assets/js/111.b36e6ea6.js"><link rel="prefetch" href="/vue-TIL/assets/js/112.189db968.js"><link rel="prefetch" href="/vue-TIL/assets/js/113.8278b546.js"><link rel="prefetch" href="/vue-TIL/assets/js/114.0d61c632.js"><link rel="prefetch" href="/vue-TIL/assets/js/115.cca6255f.js"><link rel="prefetch" href="/vue-TIL/assets/js/116.8cb2144d.js"><link rel="prefetch" href="/vue-TIL/assets/js/117.08b28844.js"><link rel="prefetch" href="/vue-TIL/assets/js/118.d928d5d8.js"><link rel="prefetch" href="/vue-TIL/assets/js/119.ff3b2768.js"><link rel="prefetch" href="/vue-TIL/assets/js/12.7d9a3073.js"><link rel="prefetch" href="/vue-TIL/assets/js/120.17036334.js"><link rel="prefetch" href="/vue-TIL/assets/js/121.8b5ba2b1.js"><link rel="prefetch" href="/vue-TIL/assets/js/122.e28264fb.js"><link rel="prefetch" href="/vue-TIL/assets/js/123.746a2c4d.js"><link rel="prefetch" href="/vue-TIL/assets/js/124.7ba1724b.js"><link rel="prefetch" href="/vue-TIL/assets/js/125.fa12d4ac.js"><link rel="prefetch" href="/vue-TIL/assets/js/126.9c87c317.js"><link rel="prefetch" href="/vue-TIL/assets/js/127.c8e4eaf4.js"><link rel="prefetch" href="/vue-TIL/assets/js/128.b0cb5903.js"><link rel="prefetch" href="/vue-TIL/assets/js/129.d04cc0dc.js"><link rel="prefetch" href="/vue-TIL/assets/js/13.1a5ebb04.js"><link rel="prefetch" href="/vue-TIL/assets/js/130.a2ee1ac8.js"><link rel="prefetch" href="/vue-TIL/assets/js/131.a4bb8d82.js"><link rel="prefetch" href="/vue-TIL/assets/js/132.7592c7e0.js"><link rel="prefetch" href="/vue-TIL/assets/js/133.734aec27.js"><link rel="prefetch" href="/vue-TIL/assets/js/134.9ef00f7c.js"><link rel="prefetch" href="/vue-TIL/assets/js/135.1bcd40ed.js"><link rel="prefetch" href="/vue-TIL/assets/js/136.d221bb8f.js"><link rel="prefetch" href="/vue-TIL/assets/js/137.8cb8dc0c.js"><link rel="prefetch" href="/vue-TIL/assets/js/138.df1a73b6.js"><link rel="prefetch" href="/vue-TIL/assets/js/139.c02df3c9.js"><link rel="prefetch" href="/vue-TIL/assets/js/14.586f0b84.js"><link rel="prefetch" href="/vue-TIL/assets/js/140.ce3d227d.js"><link rel="prefetch" href="/vue-TIL/assets/js/141.a9750443.js"><link rel="prefetch" href="/vue-TIL/assets/js/142.2369125e.js"><link rel="prefetch" href="/vue-TIL/assets/js/143.ad5d9085.js"><link rel="prefetch" href="/vue-TIL/assets/js/144.61c3e7ff.js"><link rel="prefetch" href="/vue-TIL/assets/js/145.0184be17.js"><link rel="prefetch" href="/vue-TIL/assets/js/146.1388c319.js"><link rel="prefetch" href="/vue-TIL/assets/js/147.51c5b637.js"><link rel="prefetch" href="/vue-TIL/assets/js/148.09e9485c.js"><link rel="prefetch" href="/vue-TIL/assets/js/149.31685aba.js"><link rel="prefetch" href="/vue-TIL/assets/js/15.fe2f370e.js"><link rel="prefetch" href="/vue-TIL/assets/js/150.15444b6f.js"><link rel="prefetch" href="/vue-TIL/assets/js/151.15186411.js"><link rel="prefetch" href="/vue-TIL/assets/js/152.41da7b36.js"><link rel="prefetch" href="/vue-TIL/assets/js/153.9bb0387a.js"><link rel="prefetch" href="/vue-TIL/assets/js/154.0c68f14f.js"><link rel="prefetch" href="/vue-TIL/assets/js/155.badfc67a.js"><link rel="prefetch" href="/vue-TIL/assets/js/156.770e88d4.js"><link rel="prefetch" href="/vue-TIL/assets/js/157.1e1193c1.js"><link rel="prefetch" href="/vue-TIL/assets/js/158.24a9394c.js"><link rel="prefetch" href="/vue-TIL/assets/js/159.f5af5366.js"><link rel="prefetch" href="/vue-TIL/assets/js/16.5d73cc0b.js"><link rel="prefetch" href="/vue-TIL/assets/js/160.cc31eb90.js"><link rel="prefetch" href="/vue-TIL/assets/js/161.f3075dab.js"><link rel="prefetch" href="/vue-TIL/assets/js/162.83b65759.js"><link rel="prefetch" href="/vue-TIL/assets/js/163.6e80bce5.js"><link rel="prefetch" href="/vue-TIL/assets/js/164.5276a1ad.js"><link rel="prefetch" href="/vue-TIL/assets/js/165.5234283d.js"><link rel="prefetch" href="/vue-TIL/assets/js/166.c397c00e.js"><link rel="prefetch" href="/vue-TIL/assets/js/167.796466f7.js"><link rel="prefetch" href="/vue-TIL/assets/js/168.61fb06e6.js"><link rel="prefetch" href="/vue-TIL/assets/js/169.cb435189.js"><link rel="prefetch" href="/vue-TIL/assets/js/17.1d38098d.js"><link rel="prefetch" href="/vue-TIL/assets/js/170.db0957c4.js"><link rel="prefetch" href="/vue-TIL/assets/js/171.a614dbbe.js"><link rel="prefetch" href="/vue-TIL/assets/js/172.4e59cca1.js"><link rel="prefetch" href="/vue-TIL/assets/js/173.14e01b90.js"><link rel="prefetch" href="/vue-TIL/assets/js/174.320f0bfa.js"><link rel="prefetch" href="/vue-TIL/assets/js/175.6c254965.js"><link rel="prefetch" href="/vue-TIL/assets/js/176.9f114aa7.js"><link rel="prefetch" href="/vue-TIL/assets/js/177.d00d1cf9.js"><link rel="prefetch" href="/vue-TIL/assets/js/178.7eb7d56e.js"><link rel="prefetch" href="/vue-TIL/assets/js/179.a13cf132.js"><link rel="prefetch" href="/vue-TIL/assets/js/18.de892aae.js"><link rel="prefetch" href="/vue-TIL/assets/js/180.9b631254.js"><link rel="prefetch" href="/vue-TIL/assets/js/181.81a32b28.js"><link rel="prefetch" href="/vue-TIL/assets/js/182.07df3e16.js"><link rel="prefetch" href="/vue-TIL/assets/js/183.794ccaa0.js"><link rel="prefetch" href="/vue-TIL/assets/js/184.f5f6455a.js"><link rel="prefetch" href="/vue-TIL/assets/js/185.e39bfb77.js"><link rel="prefetch" href="/vue-TIL/assets/js/186.876784b3.js"><link rel="prefetch" href="/vue-TIL/assets/js/187.77bcfac1.js"><link rel="prefetch" href="/vue-TIL/assets/js/188.2aaae50e.js"><link rel="prefetch" href="/vue-TIL/assets/js/189.c981e3d4.js"><link rel="prefetch" href="/vue-TIL/assets/js/19.bbbaa940.js"><link rel="prefetch" href="/vue-TIL/assets/js/190.8cf55e2d.js"><link rel="prefetch" href="/vue-TIL/assets/js/191.a5c66a78.js"><link rel="prefetch" href="/vue-TIL/assets/js/192.ac8f5ded.js"><link rel="prefetch" href="/vue-TIL/assets/js/193.cfc244cf.js"><link rel="prefetch" href="/vue-TIL/assets/js/194.ad61cd5c.js"><link rel="prefetch" href="/vue-TIL/assets/js/195.089715ee.js"><link rel="prefetch" href="/vue-TIL/assets/js/196.e5bb730f.js"><link rel="prefetch" href="/vue-TIL/assets/js/197.64567395.js"><link rel="prefetch" href="/vue-TIL/assets/js/198.5e50d86a.js"><link rel="prefetch" href="/vue-TIL/assets/js/199.6cae5a3f.js"><link rel="prefetch" href="/vue-TIL/assets/js/20.076b4c1f.js"><link rel="prefetch" href="/vue-TIL/assets/js/200.c6c35fac.js"><link rel="prefetch" href="/vue-TIL/assets/js/201.4cc0dfe1.js"><link rel="prefetch" href="/vue-TIL/assets/js/202.21295f93.js"><link rel="prefetch" href="/vue-TIL/assets/js/203.dd950505.js"><link rel="prefetch" href="/vue-TIL/assets/js/204.a5c7314a.js"><link rel="prefetch" href="/vue-TIL/assets/js/205.5f2ad81a.js"><link rel="prefetch" href="/vue-TIL/assets/js/206.9ad574fb.js"><link rel="prefetch" href="/vue-TIL/assets/js/207.b0278e98.js"><link rel="prefetch" href="/vue-TIL/assets/js/208.8bd6e75e.js"><link rel="prefetch" href="/vue-TIL/assets/js/209.4bf6c0c3.js"><link rel="prefetch" href="/vue-TIL/assets/js/21.c8633639.js"><link rel="prefetch" href="/vue-TIL/assets/js/210.235f1eb5.js"><link rel="prefetch" href="/vue-TIL/assets/js/211.bdb46826.js"><link rel="prefetch" href="/vue-TIL/assets/js/212.6ffc2469.js"><link rel="prefetch" href="/vue-TIL/assets/js/213.464c4da6.js"><link rel="prefetch" href="/vue-TIL/assets/js/214.f6a353c1.js"><link rel="prefetch" href="/vue-TIL/assets/js/215.4f40d19f.js"><link rel="prefetch" href="/vue-TIL/assets/js/216.8176df9a.js"><link rel="prefetch" href="/vue-TIL/assets/js/217.6068357f.js"><link rel="prefetch" href="/vue-TIL/assets/js/218.e660194e.js"><link rel="prefetch" href="/vue-TIL/assets/js/219.3d78c341.js"><link rel="prefetch" href="/vue-TIL/assets/js/22.fb1c8f9f.js"><link rel="prefetch" href="/vue-TIL/assets/js/220.8b6d6b4b.js"><link rel="prefetch" href="/vue-TIL/assets/js/221.a054e194.js"><link rel="prefetch" href="/vue-TIL/assets/js/222.76aa3d0f.js"><link rel="prefetch" href="/vue-TIL/assets/js/223.de362ee3.js"><link rel="prefetch" href="/vue-TIL/assets/js/224.878e3628.js"><link rel="prefetch" href="/vue-TIL/assets/js/225.a20362bf.js"><link rel="prefetch" href="/vue-TIL/assets/js/226.af3d1741.js"><link rel="prefetch" href="/vue-TIL/assets/js/227.692a39be.js"><link rel="prefetch" href="/vue-TIL/assets/js/228.85e4f99e.js"><link rel="prefetch" href="/vue-TIL/assets/js/229.fb614fb3.js"><link rel="prefetch" href="/vue-TIL/assets/js/23.e0ddc1b4.js"><link rel="prefetch" href="/vue-TIL/assets/js/230.94e42f9b.js"><link rel="prefetch" href="/vue-TIL/assets/js/231.ad5ba591.js"><link rel="prefetch" href="/vue-TIL/assets/js/232.99958dc3.js"><link rel="prefetch" href="/vue-TIL/assets/js/233.90bdb2f4.js"><link rel="prefetch" href="/vue-TIL/assets/js/234.8bae5012.js"><link rel="prefetch" href="/vue-TIL/assets/js/235.88981612.js"><link rel="prefetch" href="/vue-TIL/assets/js/236.b6568885.js"><link rel="prefetch" href="/vue-TIL/assets/js/237.be80bd98.js"><link rel="prefetch" href="/vue-TIL/assets/js/238.17be63cc.js"><link rel="prefetch" href="/vue-TIL/assets/js/239.647b00f6.js"><link rel="prefetch" href="/vue-TIL/assets/js/24.415a23f8.js"><link rel="prefetch" href="/vue-TIL/assets/js/240.7011ad10.js"><link rel="prefetch" href="/vue-TIL/assets/js/241.2f9fb5af.js"><link rel="prefetch" href="/vue-TIL/assets/js/242.f1940132.js"><link rel="prefetch" href="/vue-TIL/assets/js/243.bc9273f4.js"><link rel="prefetch" href="/vue-TIL/assets/js/244.2b13bd8a.js"><link rel="prefetch" href="/vue-TIL/assets/js/245.7f04770b.js"><link rel="prefetch" href="/vue-TIL/assets/js/246.05b8ac38.js"><link rel="prefetch" href="/vue-TIL/assets/js/247.a1146972.js"><link rel="prefetch" href="/vue-TIL/assets/js/248.e4046a23.js"><link rel="prefetch" href="/vue-TIL/assets/js/249.3ca8e689.js"><link rel="prefetch" href="/vue-TIL/assets/js/25.f10cf784.js"><link rel="prefetch" href="/vue-TIL/assets/js/250.a4543f70.js"><link rel="prefetch" href="/vue-TIL/assets/js/251.c7251ceb.js"><link rel="prefetch" href="/vue-TIL/assets/js/252.d5e652f3.js"><link rel="prefetch" href="/vue-TIL/assets/js/253.1c0f6ef4.js"><link rel="prefetch" href="/vue-TIL/assets/js/254.5afda03b.js"><link rel="prefetch" href="/vue-TIL/assets/js/255.49488112.js"><link rel="prefetch" href="/vue-TIL/assets/js/256.8eb5d64f.js"><link rel="prefetch" href="/vue-TIL/assets/js/257.d3f4929f.js"><link rel="prefetch" href="/vue-TIL/assets/js/258.5a872afc.js"><link rel="prefetch" href="/vue-TIL/assets/js/259.275da4e7.js"><link rel="prefetch" href="/vue-TIL/assets/js/26.f6187d65.js"><link rel="prefetch" href="/vue-TIL/assets/js/260.e4d49c1d.js"><link rel="prefetch" href="/vue-TIL/assets/js/261.72636fe6.js"><link rel="prefetch" href="/vue-TIL/assets/js/262.84fb7c90.js"><link rel="prefetch" href="/vue-TIL/assets/js/263.f714dc95.js"><link rel="prefetch" href="/vue-TIL/assets/js/264.f610418b.js"><link rel="prefetch" href="/vue-TIL/assets/js/265.413b60d8.js"><link rel="prefetch" href="/vue-TIL/assets/js/266.c5d48bd8.js"><link rel="prefetch" href="/vue-TIL/assets/js/267.f061cc05.js"><link rel="prefetch" href="/vue-TIL/assets/js/268.bd1d47c1.js"><link rel="prefetch" href="/vue-TIL/assets/js/269.77655773.js"><link rel="prefetch" href="/vue-TIL/assets/js/27.13a1e69c.js"><link rel="prefetch" href="/vue-TIL/assets/js/270.a37190a4.js"><link rel="prefetch" href="/vue-TIL/assets/js/271.6eb1ef57.js"><link rel="prefetch" href="/vue-TIL/assets/js/272.ce8bbae4.js"><link rel="prefetch" href="/vue-TIL/assets/js/273.ea98afb9.js"><link rel="prefetch" href="/vue-TIL/assets/js/274.45c10c85.js"><link rel="prefetch" href="/vue-TIL/assets/js/275.907b95a6.js"><link rel="prefetch" href="/vue-TIL/assets/js/276.9df88ada.js"><link rel="prefetch" href="/vue-TIL/assets/js/277.97bc9ac2.js"><link rel="prefetch" href="/vue-TIL/assets/js/278.4703e3ff.js"><link rel="prefetch" href="/vue-TIL/assets/js/279.f210fa32.js"><link rel="prefetch" href="/vue-TIL/assets/js/28.69e5180c.js"><link rel="prefetch" href="/vue-TIL/assets/js/280.2d4ef515.js"><link rel="prefetch" href="/vue-TIL/assets/js/281.96b775bb.js"><link rel="prefetch" href="/vue-TIL/assets/js/282.9dded292.js"><link rel="prefetch" href="/vue-TIL/assets/js/283.9571379e.js"><link rel="prefetch" href="/vue-TIL/assets/js/284.22e119fb.js"><link rel="prefetch" href="/vue-TIL/assets/js/285.e7ed0689.js"><link rel="prefetch" href="/vue-TIL/assets/js/286.32c45cc5.js"><link rel="prefetch" href="/vue-TIL/assets/js/287.bc304c38.js"><link rel="prefetch" href="/vue-TIL/assets/js/288.c0cfb297.js"><link rel="prefetch" href="/vue-TIL/assets/js/289.6c78c0b3.js"><link rel="prefetch" href="/vue-TIL/assets/js/29.e470bea3.js"><link rel="prefetch" href="/vue-TIL/assets/js/290.9ddcec9a.js"><link rel="prefetch" href="/vue-TIL/assets/js/291.8576d056.js"><link rel="prefetch" href="/vue-TIL/assets/js/292.95a00bbd.js"><link rel="prefetch" href="/vue-TIL/assets/js/293.ad255a62.js"><link rel="prefetch" href="/vue-TIL/assets/js/294.697242e9.js"><link rel="prefetch" href="/vue-TIL/assets/js/295.f6fa7e3d.js"><link rel="prefetch" href="/vue-TIL/assets/js/296.78ce1635.js"><link rel="prefetch" href="/vue-TIL/assets/js/297.88550ad5.js"><link rel="prefetch" href="/vue-TIL/assets/js/298.b7999f95.js"><link rel="prefetch" href="/vue-TIL/assets/js/299.1b2e84ad.js"><link rel="prefetch" href="/vue-TIL/assets/js/3.25c5bcbd.js"><link rel="prefetch" href="/vue-TIL/assets/js/30.ebb5cc3c.js"><link rel="prefetch" href="/vue-TIL/assets/js/300.f37467bc.js"><link rel="prefetch" href="/vue-TIL/assets/js/301.bdb5b0db.js"><link rel="prefetch" href="/vue-TIL/assets/js/302.b501db1f.js"><link rel="prefetch" href="/vue-TIL/assets/js/303.d92edb39.js"><link rel="prefetch" href="/vue-TIL/assets/js/304.56ef3b57.js"><link rel="prefetch" href="/vue-TIL/assets/js/305.17fd761b.js"><link rel="prefetch" href="/vue-TIL/assets/js/306.ce02caaa.js"><link rel="prefetch" href="/vue-TIL/assets/js/307.6ddc3275.js"><link rel="prefetch" href="/vue-TIL/assets/js/308.76a5703a.js"><link rel="prefetch" href="/vue-TIL/assets/js/309.639e0b37.js"><link rel="prefetch" href="/vue-TIL/assets/js/31.6410a3ed.js"><link rel="prefetch" href="/vue-TIL/assets/js/310.6fcf142b.js"><link rel="prefetch" href="/vue-TIL/assets/js/311.7ca7a795.js"><link rel="prefetch" href="/vue-TIL/assets/js/312.91f70480.js"><link rel="prefetch" href="/vue-TIL/assets/js/313.02e9854a.js"><link rel="prefetch" href="/vue-TIL/assets/js/314.2f2e54bb.js"><link rel="prefetch" href="/vue-TIL/assets/js/315.8cddc9e1.js"><link rel="prefetch" href="/vue-TIL/assets/js/316.8788b857.js"><link rel="prefetch" href="/vue-TIL/assets/js/317.4fc9f4cb.js"><link rel="prefetch" href="/vue-TIL/assets/js/318.7f8e5a95.js"><link rel="prefetch" href="/vue-TIL/assets/js/319.7872ccfb.js"><link rel="prefetch" href="/vue-TIL/assets/js/32.d9463bbf.js"><link rel="prefetch" href="/vue-TIL/assets/js/320.fa542dc6.js"><link rel="prefetch" href="/vue-TIL/assets/js/321.09663c56.js"><link rel="prefetch" href="/vue-TIL/assets/js/322.2ff4747d.js"><link rel="prefetch" href="/vue-TIL/assets/js/323.a82a4491.js"><link rel="prefetch" href="/vue-TIL/assets/js/324.5bb072cd.js"><link rel="prefetch" href="/vue-TIL/assets/js/325.b45764c6.js"><link rel="prefetch" href="/vue-TIL/assets/js/326.09438ada.js"><link rel="prefetch" href="/vue-TIL/assets/js/327.7c0e2cdc.js"><link rel="prefetch" href="/vue-TIL/assets/js/328.7ee29622.js"><link rel="prefetch" href="/vue-TIL/assets/js/329.90754e2c.js"><link rel="prefetch" href="/vue-TIL/assets/js/33.bd1eb4a9.js"><link rel="prefetch" href="/vue-TIL/assets/js/330.56170ae7.js"><link rel="prefetch" href="/vue-TIL/assets/js/331.7ba85c81.js"><link rel="prefetch" href="/vue-TIL/assets/js/332.835cadf3.js"><link rel="prefetch" href="/vue-TIL/assets/js/333.87d9542d.js"><link rel="prefetch" href="/vue-TIL/assets/js/334.436c515c.js"><link rel="prefetch" href="/vue-TIL/assets/js/335.70324e44.js"><link rel="prefetch" href="/vue-TIL/assets/js/336.6a98a6ef.js"><link rel="prefetch" href="/vue-TIL/assets/js/337.cce7425a.js"><link rel="prefetch" href="/vue-TIL/assets/js/338.6d207d50.js"><link rel="prefetch" href="/vue-TIL/assets/js/339.38d04d52.js"><link rel="prefetch" href="/vue-TIL/assets/js/34.3428be56.js"><link rel="prefetch" href="/vue-TIL/assets/js/340.f30b6425.js"><link rel="prefetch" href="/vue-TIL/assets/js/341.b33bf208.js"><link rel="prefetch" href="/vue-TIL/assets/js/342.994865b0.js"><link rel="prefetch" href="/vue-TIL/assets/js/343.26233469.js"><link rel="prefetch" href="/vue-TIL/assets/js/344.fcaf1717.js"><link rel="prefetch" href="/vue-TIL/assets/js/345.b172a8c7.js"><link rel="prefetch" href="/vue-TIL/assets/js/346.6b327f28.js"><link rel="prefetch" href="/vue-TIL/assets/js/347.27bcbdfd.js"><link rel="prefetch" href="/vue-TIL/assets/js/348.89773113.js"><link rel="prefetch" href="/vue-TIL/assets/js/349.00ed3ba1.js"><link rel="prefetch" href="/vue-TIL/assets/js/35.2ef96099.js"><link rel="prefetch" href="/vue-TIL/assets/js/350.2e964214.js"><link rel="prefetch" href="/vue-TIL/assets/js/351.a5772685.js"><link rel="prefetch" href="/vue-TIL/assets/js/352.84edc767.js"><link rel="prefetch" href="/vue-TIL/assets/js/353.ccbcb809.js"><link rel="prefetch" href="/vue-TIL/assets/js/354.369304c1.js"><link rel="prefetch" href="/vue-TIL/assets/js/355.06d883dd.js"><link rel="prefetch" href="/vue-TIL/assets/js/356.d4ed50fc.js"><link rel="prefetch" href="/vue-TIL/assets/js/357.d62febcf.js"><link rel="prefetch" href="/vue-TIL/assets/js/358.cd32e961.js"><link rel="prefetch" href="/vue-TIL/assets/js/359.5ffc1e6b.js"><link rel="prefetch" href="/vue-TIL/assets/js/36.f354ef1c.js"><link rel="prefetch" href="/vue-TIL/assets/js/360.b4b07852.js"><link rel="prefetch" href="/vue-TIL/assets/js/361.a95c11a1.js"><link rel="prefetch" href="/vue-TIL/assets/js/362.2dfe1c5a.js"><link rel="prefetch" href="/vue-TIL/assets/js/363.2bde7c95.js"><link rel="prefetch" href="/vue-TIL/assets/js/364.af5bd2f0.js"><link rel="prefetch" href="/vue-TIL/assets/js/365.2c3fdf9a.js"><link rel="prefetch" href="/vue-TIL/assets/js/366.e5564035.js"><link rel="prefetch" href="/vue-TIL/assets/js/367.ae594999.js"><link rel="prefetch" href="/vue-TIL/assets/js/368.3feca712.js"><link rel="prefetch" href="/vue-TIL/assets/js/369.ebb49b5b.js"><link rel="prefetch" href="/vue-TIL/assets/js/37.77c0f65a.js"><link rel="prefetch" href="/vue-TIL/assets/js/370.5b7a30c8.js"><link rel="prefetch" href="/vue-TIL/assets/js/371.397eb919.js"><link rel="prefetch" href="/vue-TIL/assets/js/372.250be505.js"><link rel="prefetch" href="/vue-TIL/assets/js/373.4c37daf1.js"><link rel="prefetch" href="/vue-TIL/assets/js/374.ec1d09be.js"><link rel="prefetch" href="/vue-TIL/assets/js/375.c2921122.js"><link rel="prefetch" href="/vue-TIL/assets/js/376.c336a461.js"><link rel="prefetch" href="/vue-TIL/assets/js/377.424fd84e.js"><link rel="prefetch" href="/vue-TIL/assets/js/378.afe44501.js"><link rel="prefetch" href="/vue-TIL/assets/js/379.a7cd849b.js"><link rel="prefetch" href="/vue-TIL/assets/js/38.3f46c583.js"><link rel="prefetch" href="/vue-TIL/assets/js/380.e0ee54d2.js"><link rel="prefetch" href="/vue-TIL/assets/js/381.06645829.js"><link rel="prefetch" href="/vue-TIL/assets/js/382.59a7742a.js"><link rel="prefetch" href="/vue-TIL/assets/js/383.85453cec.js"><link rel="prefetch" href="/vue-TIL/assets/js/384.99fdb0d2.js"><link rel="prefetch" href="/vue-TIL/assets/js/385.5288d1b3.js"><link rel="prefetch" href="/vue-TIL/assets/js/386.2cb493d1.js"><link rel="prefetch" href="/vue-TIL/assets/js/387.a0df3902.js"><link rel="prefetch" href="/vue-TIL/assets/js/388.2200dba2.js"><link rel="prefetch" href="/vue-TIL/assets/js/389.0d8ef00c.js"><link rel="prefetch" href="/vue-TIL/assets/js/39.9eb41560.js"><link rel="prefetch" href="/vue-TIL/assets/js/390.32b67470.js"><link rel="prefetch" href="/vue-TIL/assets/js/391.66b93718.js"><link rel="prefetch" href="/vue-TIL/assets/js/392.5a9ab397.js"><link rel="prefetch" href="/vue-TIL/assets/js/393.4cd96917.js"><link rel="prefetch" href="/vue-TIL/assets/js/394.45c6e91f.js"><link rel="prefetch" href="/vue-TIL/assets/js/395.8b1f5499.js"><link rel="prefetch" href="/vue-TIL/assets/js/396.7537cf7d.js"><link rel="prefetch" href="/vue-TIL/assets/js/397.42d4d2f8.js"><link rel="prefetch" href="/vue-TIL/assets/js/398.1506a263.js"><link rel="prefetch" href="/vue-TIL/assets/js/399.fcf13f98.js"><link rel="prefetch" href="/vue-TIL/assets/js/4.b22de753.js"><link rel="prefetch" href="/vue-TIL/assets/js/40.21e56b52.js"><link rel="prefetch" href="/vue-TIL/assets/js/400.44d3f53b.js"><link rel="prefetch" href="/vue-TIL/assets/js/401.53320d57.js"><link rel="prefetch" href="/vue-TIL/assets/js/402.5c6d733e.js"><link rel="prefetch" href="/vue-TIL/assets/js/403.5d86a921.js"><link rel="prefetch" href="/vue-TIL/assets/js/404.57634e0d.js"><link rel="prefetch" href="/vue-TIL/assets/js/405.01412788.js"><link rel="prefetch" href="/vue-TIL/assets/js/406.ec57e70f.js"><link rel="prefetch" href="/vue-TIL/assets/js/407.ccbcb434.js"><link rel="prefetch" href="/vue-TIL/assets/js/408.8f75584a.js"><link rel="prefetch" href="/vue-TIL/assets/js/409.a9213c79.js"><link rel="prefetch" href="/vue-TIL/assets/js/41.75d0a8b8.js"><link rel="prefetch" href="/vue-TIL/assets/js/410.5aedd7d0.js"><link rel="prefetch" href="/vue-TIL/assets/js/411.e3c2d41d.js"><link rel="prefetch" href="/vue-TIL/assets/js/412.f5748bcb.js"><link rel="prefetch" href="/vue-TIL/assets/js/413.966a43ee.js"><link rel="prefetch" href="/vue-TIL/assets/js/414.7a4062f2.js"><link rel="prefetch" href="/vue-TIL/assets/js/415.50e72576.js"><link rel="prefetch" href="/vue-TIL/assets/js/416.e0ccf5ab.js"><link rel="prefetch" href="/vue-TIL/assets/js/417.75aef8fa.js"><link rel="prefetch" href="/vue-TIL/assets/js/418.2c181fbe.js"><link rel="prefetch" href="/vue-TIL/assets/js/419.bebe32f9.js"><link rel="prefetch" href="/vue-TIL/assets/js/420.88929efb.js"><link rel="prefetch" href="/vue-TIL/assets/js/421.dceca47b.js"><link rel="prefetch" href="/vue-TIL/assets/js/422.faace4e3.js"><link rel="prefetch" href="/vue-TIL/assets/js/423.d05f9380.js"><link rel="prefetch" href="/vue-TIL/assets/js/424.0fadfcfc.js"><link rel="prefetch" href="/vue-TIL/assets/js/425.fbef25c0.js"><link rel="prefetch" href="/vue-TIL/assets/js/426.ec7baf51.js"><link rel="prefetch" href="/vue-TIL/assets/js/427.0f690fd0.js"><link rel="prefetch" href="/vue-TIL/assets/js/428.c38bd1ab.js"><link rel="prefetch" href="/vue-TIL/assets/js/429.d107fc4d.js"><link rel="prefetch" href="/vue-TIL/assets/js/43.709fa011.js"><link rel="prefetch" href="/vue-TIL/assets/js/430.5944abb0.js"><link rel="prefetch" href="/vue-TIL/assets/js/431.adc8916a.js"><link rel="prefetch" href="/vue-TIL/assets/js/432.017c4d13.js"><link rel="prefetch" href="/vue-TIL/assets/js/433.e7d529e4.js"><link rel="prefetch" href="/vue-TIL/assets/js/434.ed5ce687.js"><link rel="prefetch" href="/vue-TIL/assets/js/435.be92270c.js"><link rel="prefetch" href="/vue-TIL/assets/js/436.070f2da4.js"><link rel="prefetch" href="/vue-TIL/assets/js/437.56530d9f.js"><link rel="prefetch" href="/vue-TIL/assets/js/438.2d17b6ab.js"><link rel="prefetch" href="/vue-TIL/assets/js/439.5144bcd5.js"><link rel="prefetch" href="/vue-TIL/assets/js/44.a7b09e5d.js"><link rel="prefetch" href="/vue-TIL/assets/js/440.9fb8ad25.js"><link rel="prefetch" href="/vue-TIL/assets/js/441.8dd68ea7.js"><link rel="prefetch" href="/vue-TIL/assets/js/442.8886c48c.js"><link rel="prefetch" href="/vue-TIL/assets/js/443.ee6b27ac.js"><link rel="prefetch" href="/vue-TIL/assets/js/444.7649baa0.js"><link rel="prefetch" href="/vue-TIL/assets/js/445.56995103.js"><link rel="prefetch" href="/vue-TIL/assets/js/446.456d6488.js"><link rel="prefetch" href="/vue-TIL/assets/js/447.5fc4f2dc.js"><link rel="prefetch" href="/vue-TIL/assets/js/448.c2a100b0.js"><link rel="prefetch" href="/vue-TIL/assets/js/449.fc34a386.js"><link rel="prefetch" href="/vue-TIL/assets/js/45.369d85b1.js"><link rel="prefetch" href="/vue-TIL/assets/js/450.deab7aa0.js"><link rel="prefetch" href="/vue-TIL/assets/js/451.c06f0983.js"><link rel="prefetch" href="/vue-TIL/assets/js/452.25181dde.js"><link rel="prefetch" href="/vue-TIL/assets/js/453.50907dd2.js"><link rel="prefetch" href="/vue-TIL/assets/js/454.5dc11ce5.js"><link rel="prefetch" href="/vue-TIL/assets/js/455.c587a769.js"><link rel="prefetch" href="/vue-TIL/assets/js/456.28511450.js"><link rel="prefetch" href="/vue-TIL/assets/js/457.fc66bc68.js"><link rel="prefetch" href="/vue-TIL/assets/js/458.67ee7abf.js"><link rel="prefetch" href="/vue-TIL/assets/js/459.612aaa28.js"><link rel="prefetch" href="/vue-TIL/assets/js/46.bd10a890.js"><link rel="prefetch" href="/vue-TIL/assets/js/460.55df17dc.js"><link rel="prefetch" href="/vue-TIL/assets/js/461.dea60351.js"><link rel="prefetch" href="/vue-TIL/assets/js/462.2c66eb41.js"><link rel="prefetch" href="/vue-TIL/assets/js/463.33dd4607.js"><link rel="prefetch" href="/vue-TIL/assets/js/464.30ddffec.js"><link rel="prefetch" href="/vue-TIL/assets/js/465.f4cdab91.js"><link rel="prefetch" href="/vue-TIL/assets/js/466.d7d6e3e9.js"><link rel="prefetch" href="/vue-TIL/assets/js/467.e6fa4ab3.js"><link rel="prefetch" href="/vue-TIL/assets/js/468.7c8e2c66.js"><link rel="prefetch" href="/vue-TIL/assets/js/469.d9c9bfbb.js"><link rel="prefetch" href="/vue-TIL/assets/js/47.ea860fc6.js"><link rel="prefetch" href="/vue-TIL/assets/js/470.5fa32542.js"><link rel="prefetch" href="/vue-TIL/assets/js/471.5833c459.js"><link rel="prefetch" href="/vue-TIL/assets/js/472.2a237d42.js"><link rel="prefetch" href="/vue-TIL/assets/js/473.6bcc5a5c.js"><link rel="prefetch" href="/vue-TIL/assets/js/474.45d3a2ac.js"><link rel="prefetch" href="/vue-TIL/assets/js/475.409e587c.js"><link rel="prefetch" href="/vue-TIL/assets/js/476.24ea8428.js"><link rel="prefetch" href="/vue-TIL/assets/js/477.98d0388a.js"><link rel="prefetch" href="/vue-TIL/assets/js/478.1dafdaec.js"><link rel="prefetch" href="/vue-TIL/assets/js/479.da02d85f.js"><link rel="prefetch" href="/vue-TIL/assets/js/48.11b746f0.js"><link rel="prefetch" href="/vue-TIL/assets/js/480.0c7ee2da.js"><link rel="prefetch" href="/vue-TIL/assets/js/481.8431e596.js"><link rel="prefetch" href="/vue-TIL/assets/js/482.bfcd82b7.js"><link rel="prefetch" href="/vue-TIL/assets/js/483.b17dbbc6.js"><link rel="prefetch" href="/vue-TIL/assets/js/484.6ebeb3f7.js"><link rel="prefetch" href="/vue-TIL/assets/js/485.36669762.js"><link rel="prefetch" href="/vue-TIL/assets/js/486.7ba4f5e4.js"><link rel="prefetch" href="/vue-TIL/assets/js/487.e8541bdc.js"><link rel="prefetch" href="/vue-TIL/assets/js/488.cad23cdb.js"><link rel="prefetch" href="/vue-TIL/assets/js/489.d1eda321.js"><link rel="prefetch" href="/vue-TIL/assets/js/49.2a5d5638.js"><link rel="prefetch" href="/vue-TIL/assets/js/490.65d1ca80.js"><link rel="prefetch" href="/vue-TIL/assets/js/491.462479e9.js"><link rel="prefetch" href="/vue-TIL/assets/js/492.f533ea1a.js"><link rel="prefetch" href="/vue-TIL/assets/js/493.a1b32395.js"><link rel="prefetch" href="/vue-TIL/assets/js/494.c6e0bbd0.js"><link rel="prefetch" href="/vue-TIL/assets/js/495.ca083db4.js"><link rel="prefetch" href="/vue-TIL/assets/js/496.5ec85990.js"><link rel="prefetch" href="/vue-TIL/assets/js/497.e8b12ae0.js"><link rel="prefetch" href="/vue-TIL/assets/js/498.6d0ef660.js"><link rel="prefetch" href="/vue-TIL/assets/js/499.093e1100.js"><link rel="prefetch" href="/vue-TIL/assets/js/5.7c6dc297.js"><link rel="prefetch" href="/vue-TIL/assets/js/50.bf5a46da.js"><link rel="prefetch" href="/vue-TIL/assets/js/500.f722e476.js"><link rel="prefetch" href="/vue-TIL/assets/js/501.578f7d77.js"><link rel="prefetch" href="/vue-TIL/assets/js/502.d0ff33eb.js"><link rel="prefetch" href="/vue-TIL/assets/js/503.c1c832b7.js"><link rel="prefetch" href="/vue-TIL/assets/js/504.a5ec6db9.js"><link rel="prefetch" href="/vue-TIL/assets/js/505.aa9b609f.js"><link rel="prefetch" href="/vue-TIL/assets/js/506.f6d44b1d.js"><link rel="prefetch" href="/vue-TIL/assets/js/507.3e0c6ef3.js"><link rel="prefetch" href="/vue-TIL/assets/js/508.d97afae7.js"><link rel="prefetch" href="/vue-TIL/assets/js/509.902ccc26.js"><link rel="prefetch" href="/vue-TIL/assets/js/51.60ed37e6.js"><link rel="prefetch" href="/vue-TIL/assets/js/510.803eceb7.js"><link rel="prefetch" href="/vue-TIL/assets/js/511.6d8ff06e.js"><link rel="prefetch" href="/vue-TIL/assets/js/512.4d953f24.js"><link rel="prefetch" href="/vue-TIL/assets/js/513.dc366762.js"><link rel="prefetch" href="/vue-TIL/assets/js/514.22db18ec.js"><link rel="prefetch" href="/vue-TIL/assets/js/515.9506f331.js"><link rel="prefetch" href="/vue-TIL/assets/js/516.5792d0a8.js"><link rel="prefetch" href="/vue-TIL/assets/js/517.4bd39a9d.js"><link rel="prefetch" href="/vue-TIL/assets/js/518.9c1bd789.js"><link rel="prefetch" href="/vue-TIL/assets/js/519.0c2071d8.js"><link rel="prefetch" href="/vue-TIL/assets/js/52.02467e47.js"><link rel="prefetch" href="/vue-TIL/assets/js/520.a0575bf2.js"><link rel="prefetch" href="/vue-TIL/assets/js/521.59ddf8e5.js"><link rel="prefetch" href="/vue-TIL/assets/js/522.2059e4c5.js"><link rel="prefetch" href="/vue-TIL/assets/js/523.6720fe4d.js"><link rel="prefetch" href="/vue-TIL/assets/js/524.04652476.js"><link rel="prefetch" href="/vue-TIL/assets/js/525.e067d80b.js"><link rel="prefetch" href="/vue-TIL/assets/js/526.fe06f2b4.js"><link rel="prefetch" href="/vue-TIL/assets/js/527.5639244e.js"><link rel="prefetch" href="/vue-TIL/assets/js/528.57a77f4a.js"><link rel="prefetch" href="/vue-TIL/assets/js/529.70ccfef8.js"><link rel="prefetch" href="/vue-TIL/assets/js/53.4cc37031.js"><link rel="prefetch" href="/vue-TIL/assets/js/530.25fbdc50.js"><link rel="prefetch" href="/vue-TIL/assets/js/531.86c9c3a8.js"><link rel="prefetch" href="/vue-TIL/assets/js/532.9fa1ed37.js"><link rel="prefetch" href="/vue-TIL/assets/js/533.b9d74662.js"><link rel="prefetch" href="/vue-TIL/assets/js/534.fd5ad640.js"><link rel="prefetch" href="/vue-TIL/assets/js/535.03d549a2.js"><link rel="prefetch" href="/vue-TIL/assets/js/536.02581c69.js"><link rel="prefetch" href="/vue-TIL/assets/js/537.0048d197.js"><link rel="prefetch" href="/vue-TIL/assets/js/54.c758be51.js"><link rel="prefetch" href="/vue-TIL/assets/js/55.d1f18811.js"><link rel="prefetch" href="/vue-TIL/assets/js/57.f89f20c9.js"><link rel="prefetch" href="/vue-TIL/assets/js/58.8f844c64.js"><link rel="prefetch" href="/vue-TIL/assets/js/59.5fc9d3c5.js"><link rel="prefetch" href="/vue-TIL/assets/js/6.1d870694.js"><link rel="prefetch" href="/vue-TIL/assets/js/60.4637adc1.js"><link rel="prefetch" href="/vue-TIL/assets/js/61.a843d7d7.js"><link rel="prefetch" href="/vue-TIL/assets/js/62.1735a944.js"><link rel="prefetch" href="/vue-TIL/assets/js/63.047bd2a0.js"><link rel="prefetch" href="/vue-TIL/assets/js/64.3c623386.js"><link rel="prefetch" href="/vue-TIL/assets/js/65.cc4f595e.js"><link rel="prefetch" href="/vue-TIL/assets/js/66.969dc482.js"><link rel="prefetch" href="/vue-TIL/assets/js/67.6fc80dbb.js"><link rel="prefetch" href="/vue-TIL/assets/js/68.6665d76c.js"><link rel="prefetch" href="/vue-TIL/assets/js/69.f6b9fd8b.js"><link rel="prefetch" href="/vue-TIL/assets/js/7.545ef6ff.js"><link rel="prefetch" href="/vue-TIL/assets/js/70.880a8d93.js"><link rel="prefetch" href="/vue-TIL/assets/js/71.97f794b6.js"><link rel="prefetch" href="/vue-TIL/assets/js/72.14657ab0.js"><link rel="prefetch" href="/vue-TIL/assets/js/73.8f45fe35.js"><link rel="prefetch" href="/vue-TIL/assets/js/74.3182892f.js"><link rel="prefetch" href="/vue-TIL/assets/js/75.29b04ed4.js"><link rel="prefetch" href="/vue-TIL/assets/js/76.4c8506b1.js"><link rel="prefetch" href="/vue-TIL/assets/js/77.5dcf21b2.js"><link rel="prefetch" href="/vue-TIL/assets/js/78.8b580a0d.js"><link rel="prefetch" href="/vue-TIL/assets/js/79.ad623840.js"><link rel="prefetch" href="/vue-TIL/assets/js/80.b440d4e0.js"><link rel="prefetch" href="/vue-TIL/assets/js/81.5183d08e.js"><link rel="prefetch" href="/vue-TIL/assets/js/82.69c9ceaf.js"><link rel="prefetch" href="/vue-TIL/assets/js/83.6c49abfc.js"><link rel="prefetch" href="/vue-TIL/assets/js/84.07e9a151.js"><link rel="prefetch" href="/vue-TIL/assets/js/85.fcddad39.js"><link rel="prefetch" href="/vue-TIL/assets/js/86.a4ac4075.js"><link rel="prefetch" href="/vue-TIL/assets/js/87.5d0f3fbd.js"><link rel="prefetch" href="/vue-TIL/assets/js/88.d4e3e1a2.js"><link rel="prefetch" href="/vue-TIL/assets/js/89.e98d2e14.js"><link rel="prefetch" href="/vue-TIL/assets/js/90.b79385c8.js"><link rel="prefetch" href="/vue-TIL/assets/js/91.2ff437da.js"><link rel="prefetch" href="/vue-TIL/assets/js/92.4d63c681.js"><link rel="prefetch" href="/vue-TIL/assets/js/93.36cf0795.js"><link rel="prefetch" href="/vue-TIL/assets/js/94.179ded85.js"><link rel="prefetch" href="/vue-TIL/assets/js/95.a33a2335.js"><link rel="prefetch" href="/vue-TIL/assets/js/96.9c84a762.js"><link rel="prefetch" href="/vue-TIL/assets/js/97.c642d4cf.js"><link rel="prefetch" href="/vue-TIL/assets/js/98.6bf203b7.js"><link rel="prefetch" href="/vue-TIL/assets/js/99.29fd2389.js"><link rel="prefetch" href="/vue-TIL/assets/js/vendors~docsearch.8faba15a.js">
    <link rel="stylesheet" href="/vue-TIL/assets/css/0.styles.7142d2c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today I Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-TIL/trash/introduction.html" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/vue-TIL/archive.html" class="nav-link">
  Archive
</a></div> <a href="https://github.com/Parkjju/vue-TIL" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-TIL/trash/introduction.html" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/vue-TIL/archive.html" class="nav-link">
  Archive
</a></div> <a href="https://github.com/Parkjju/vue-TIL" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Snack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-TIL/trash/240614-47.html" class="sidebar-link">Snack - [iOS] Kingfisher를 통한 캐시 성능 향상 확인해보기</a></li><li><a href="/vue-TIL/trash/231019-33.html" class="sidebar-link">Snack - [iOS] Alamofire 401 중복 호출문제 개선</a></li><li><a href="/vue-TIL/trash/230319-19.html" class="sidebar-link">Snack - [iOS] 테이블뷰 인덱싱 (feat. 한글 유니코드)</a></li><li><a href="/vue-TIL/trash/240613-46.html" class="sidebar-link">Snack - [iOS] 반응형으로 UX 개선하기</a></li><li><a href="/vue-TIL/trash/230512-27.html" class="sidebar-link">Snack - [iOS] Swift 이미지 확대 및 리사이징, 움직이기 (UIPinchGestureRecognizer, UIPanGestureRecognizer), CGAffineTransform 사용법</a></li><li><a href="/vue-TIL/trash/231123-34.html" class="sidebar-link">Snack - [iOS] 킹피셔 이미지 캐싱 기반의 핀터레스트 레이아웃 구현 + RxSwift</a></li><li><a href="/vue-TIL/trash/231125-35.html" class="sidebar-link">Snack - [iOS] RxDataSource 컬렉션뷰 헤더 SupplementaryView</a></li><li><a href="/vue-TIL/trash/231205-39.html" class="sidebar-link">Snack - [iOS] Kingfisher 네트워크 목업 테스트</a></li><li><a href="/vue-TIL/trash/240416-45.html" class="sidebar-link">Snack - [iOS] UIPageViewController에 코디네이터 패턴 적용하기</a></li><li><a href="/vue-TIL/trash/230918-31.html" class="sidebar-link">Snack - [iOS] RxSwift Input &amp; Output</a></li><li><a href="/vue-TIL/trash/250521-mcp.html" class="sidebar-link">Snack - [iOS] MCP 서버 구축하기</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>프로젝트 포즈피커 개발 이야기입니다! 궁금하시다면 놀러와주세요 😃 <a href="https://apps.apple.com/kr/app/%ED%8F%AC%EC%A6%88%ED%94%BC%EC%BB%A4-%EB%84%A4%EC%BB%B7%EC%82%AC%EC%A7%84-%ED%8F%AC%EC%A6%88%EC%B6%94%EC%B2%9C/id6474260471" target="_blank" rel="noopener noreferrer">[포즈피커 다운받기🔗]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="개요"><a href="#개요" class="header-anchor">#</a> 개요</h2> <p>프로젝트 팀원분들은 절대 보채시지 않으셨지만.. 어쩌다 보니 너무 빠른 호흡으로 개발이 진행되어 정말 눈에 보이는 것에만 집중된 개발을 하게 되었다. 유지보수나 앱 전체적인 구조는 크게 고려하지 않고 기능 구현 중심으로 개발을 진행했는데, 그러다 보니 테스트 코드 작성은 물론이거니와 아래와 같은 문제도 발생했다.</p> <p><img src="/vue-TIL/assets/img/44-1.cbe6cbfd.png" alt="44-1"></p> <p>뷰모델에서 데이터를 직접적으로 소유하다 보니 데이터 타입 명세서가 변경되자 마자 미친듯한 에러가 발생하였다. 이것이 유지보수가 고려되지 않은 앱이라는 것을 절실히 깨닫는 지점이었다.</p> <p>문제를 직접 경험하다 보니 레파지토리 패턴이라던지, 클린 아키텍처 관점에서 도메인과 프레젠테이션, 데이터 형태로 계층을 구분하여 앱을 개발하는 이유를 조금이나마 헤아려볼 수 있었던 것 같다.</p> <p>이 글에서는 출시 준비중인 포즈피커 앱에 클린 아키텍처를 적용해가는 과정을 정리하려고 한다. 이 글 작성에 많은 도움이 된 <a href="https://jeonyeohun.tistory.com/305" target="_blank" rel="noopener noreferrer">메이트러너 클린 아키텍처 도입기 글을<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 꼭 정독하면 좋을 것 같다!</p> <h2 id="아키텍처-다이어그램"><a href="#아키텍처-다이어그램" class="header-anchor">#</a> 아키텍처 다이어그램</h2> <p>클린 아키텍처가 적용된 다이어그램을 보면 다음과 같다.</p> <p><img src="/vue-TIL/assets/img/44-3.0974cf7b.png" alt="44-3"></p> <p>앱 내에 레이어들은 아래와 같이 구분된다.</p> <ol><li>도메인 계층: 모델, 유스케이스 프로토콜, 유스케이스 구현체
<ul><li>모델: JSON 디코딩에 사용될 타입</li> <li>유스케이스 프로토콜: 앱 Scene별로 뿌려줄 데이터 형태</li> <li>유스케이스 구현체: 프로토콜 채택 후 구현이 이루어진 실제 클래스</li></ul></li> <li>데이터 계층: 레파지토리 프로토콜, 레파지토리 구현체
<ul><li>레파지토리 프로토콜: 네트워크 요청 흐름에 대한 정의</li> <li>레파지토리 구현체: 프로토콜 채택 후 네트워크 요청에 대한 내부 코드. 유스케이스에 주입할 때는 타입을 프로토콜로 전달하여 내부 코드가 은닉화된다</li></ul></li> <li>프레젠테이션 계층: Scene별로 그룹화 이후 뷰와 뷰모델, 코디네이터로 구성
<ul><li>코디네이터: 화면 이동의 로직 전체가 정의된다. 흐름을 프로토콜로 먼저 정의하고 이에 대한 실제 구현을 클래스에 정의</li> <li>뷰모델: 뷰로부터의 이벤트 처리 로직 전반을 작성한다. 유스케이스를 보유하며 인풋에 따른 유스케이스 데이터 로드 타이밍을 정의하게 된다.</li> <li>뷰 컨트롤러: UI 구현</li></ul></li> <li>인프라 계층: 네트워크 관련 설정 및 요청 코드 작성, 라우터 정의
<ul><li>네트워크 서비스 프로토콜: 네트워크 요청 형태를 정의한다. 일반 네트워크 통신을 위한 Single 옵저버블을 리턴하는 함수와 멀티파트 POST 통신을 위한 <code>requestMultipartSingle</code> 함수로 구성</li> <li>각종 에러, URLRequest을 리턴해주는 라우터 열거형, 인증 만료 처리를 위한 네트워크 인터셉터, 디버깅을 위한 이벤트 로거 존재</li></ul></li> <li>그 외: 상수값, 열거형, 컴포넌트 등</li></ol> <h2 id="코디네이터-패턴"><a href="#코디네이터-패턴" class="header-anchor">#</a> 코디네이터 패턴</h2> <p>코디네이터는 프레젠테이션 레이어에 속한다. 화면 이동 로직들 전체를 독점적으로 관리하게 된다. <code>present</code> 혹은 <code>dismiss</code>와 같은 함수 호출은 뷰 컨트롤러 내에서 간단하게 이루어질 수 있지만, 특정 UI와의 상호작용을 통해 이루어진다는 점에서 뷰모델에서 해당 이벤트를 관찰하고 있어야 하며 이에 따른 처리 로직 역시 뷰모델 내에서 이루어져야 한다고 볼 수 있다.</p> <p><img src="/vue-TIL/assets/img/44-4.0532ecad.gif" alt="44-4"></p> <p>위의 예시 화면을 보면 이미지 탭 이후 확대된 이미지 뷰를 보유한 컨트롤러를 present하는게 전부인 동작이지만 뷰 컨트롤러 내에 로직을 넣지 않고 코디네이터로 로직을 이동시킨다는 것이다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">bindViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> input <span class="token operator">=</span> <span class="token class-name">PosePickViewModel</span><span class="token punctuation">.</span><span class="token class-name">Input</span><span class="token punctuation">(</span>
        selectedPeopleCount<span class="token punctuation">:</span> selection<span class="token punctuation">.</span>pressIndex<span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        posepickButtonEvent<span class="token punctuation">:</span> posePickerButton<span class="token punctuation">.</span>rx<span class="token punctuation">.</span>tap<span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        isAnimating<span class="token punctuation">:</span> isAnimating<span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        imageViewTapEvent<span class="token punctuation">:</span> imageViewTapEvent <span class="token comment">// 이미지 탭 이벤트 전달</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">let</span> output <span class="token operator">=</span> viewModel<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> input<span class="token punctuation">,</span> disposeBag<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">configureViewModelOutput</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token attribute atrule">@objc</span>
<span class="token keyword">func</span> <span class="token function-definition function">retrievedImageTapped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">guard</span> <span class="token keyword">let</span> retrievedImage <span class="token operator">=</span> retrievedImage<span class="token punctuation">.</span>image <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
    imageViewTapEvent<span class="token punctuation">.</span><span class="token function">onNext</span><span class="token punctuation">(</span>retrievedImage<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>뷰 컨트롤러 내에 <code>private</code> 선언된 옵저버블을 선언해두고 탭된 이미지를 뷰모델의 인풋으로 전달한다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">transform</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token class-name">Input</span><span class="token punctuation">,</span> disposeBag<span class="token punctuation">:</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Output</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token class-name">Output</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">/// 이미지뷰 탭 이후 상세 이미지 띄우기</span>
    input<span class="token punctuation">.</span>imageViewTapEvent
        <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span>
            <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>coordinator<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">presentDetailImage</span><span class="token punctuation">(</span>retrievedImage<span class="token punctuation">:</span> <span class="token short-argument">$0</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>

    <span class="token keyword">return</span> output
<span class="token punctuation">}</span>
</code></pre></div><p>뷰모델에서는 코디네이터에 띄워줄 상세 이미지를 전달한다. 코디네이터 구현 클래스는 다음과 같다</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">DefaultPosePickCoordinator</span><span class="token punctuation">:</span> <span class="token class-name">PosePickCoordinator</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>

    <span class="token keyword">func</span> <span class="token function-definition function">presentDetailImage</span><span class="token punctuation">(</span>retrievedImage<span class="token punctuation">:</span> <span class="token class-name">UIImage</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> vc <span class="token operator">=</span> <span class="token class-name">ImagePopUpViewController</span><span class="token punctuation">(</span>mainImage<span class="token punctuation">:</span> retrievedImage<span class="token punctuation">)</span>
        vc<span class="token punctuation">.</span>modalTransitionStyle <span class="token operator">=</span> <span class="token punctuation">.</span>crossDissolve
        vc<span class="token punctuation">.</span>modalPresentationStyle <span class="token operator">=</span> <span class="token punctuation">.</span>overFullScreen
        <span class="token keyword">self</span><span class="token punctuation">.</span>navigationController<span class="token punctuation">.</span><span class="token function">present</span><span class="token punctuation">(</span>vc<span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>모든 코디네이터 프로토콜은 베이스가 되는 기초 <code>Coordinator</code> 프로토콜을 상속받는다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">protocol</span> <span class="token class-name">Coordinator</span><span class="token punctuation">:</span> <span class="token class-name">AnyObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> navigationController<span class="token punctuation">:</span> <span class="token class-name">UINavigationController</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token keyword">set</span> <span class="token punctuation">}</span>
    <span class="token keyword">var</span> childCoordinators<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Coordinator</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token keyword">set</span> <span class="token punctuation">}</span>
    <span class="token keyword">var</span> type<span class="token punctuation">:</span> <span class="token class-name">CoordinatorType</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function-definition function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function-definition function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function-definition function">findCoordinator</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> <span class="token class-name">CoordinatorType</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Coordinator</span><span class="token operator">?</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> navigationController<span class="token punctuation">:</span> <span class="token class-name">UINavigationController</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>화면 전환 흐름에 따라 네비게이션 컨트롤러를 새로 생성할 수도, 아니면 현재 네비게이션 컨트롤러에 push할지 present할지 등의 로직들은 직접 정의하면 된다.</p> <h2 id="가장-간단한-것부터"><a href="#가장-간단한-것부터" class="header-anchor">#</a> 가장 간단한 것부터</h2> <p>전체 코드를 뒤엎기 전 어디부터 손대야 할지 결정해야 했다. 현재 포즈피커 앱에서는 네컷 포즈를 단어 형태로 랜덤하게 제공해주는 기능이 있는데, 해당 씬의 경우 데이터 요청 동작이 GET 하나일 뿐 아니라 불러온 인스턴스로부터 <code>String</code>값만 추출하여 화면에 바인딩하면 되는게 다라서 여기부터 리팩토링을 하기로 결정했다.</p> <p><img src="/vue-TIL/assets/img/44-2.6bc0bdc2.gif" alt="44-2"></p> <h3 id="리팩토링-전"><a href="#리팩토링-전" class="header-anchor">#</a> 리팩토링 전</h3> <p>기존 뷰모델 클래스를 보면 다음과 같다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">class</span> <span class="token class-name">PoseTalkViewModel</span><span class="token punctuation">:</span> <span class="token class-name">ViewModelType</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> apiSession<span class="token punctuation">:</span> <span class="token class-name">APIService</span> <span class="token operator">=</span> <span class="token class-name">APISession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> disposeBag <span class="token operator">=</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">struct</span> <span class="token class-name">Input</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> poseTalkButtonTapped<span class="token punctuation">:</span> <span class="token class-name">ControlEvent</span><span class="token operator">&lt;</span><span class="token class-name">Void</span><span class="token operator">&gt;</span>
        <span class="token keyword">let</span> isAnimating<span class="token punctuation">:</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">Bool</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">struct</span> <span class="token class-name">Output</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> animate<span class="token punctuation">:</span> <span class="token class-name">Driver</span><span class="token operator">&lt;</span><span class="token class-name">Void</span><span class="token operator">&gt;</span>
        <span class="token keyword">let</span> poseWord<span class="token punctuation">:</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span>
        <span class="token keyword">let</span> isLoading<span class="token punctuation">:</span> <span class="token class-name">BehaviorRelay</span><span class="token operator">&lt;</span><span class="token class-name">Bool</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function-definition function">transform</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token class-name">Input</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Output</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> poseWord <span class="token operator">=</span> <span class="token class-name">BehaviorRelay</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;제시어에 맞춰\n포즈를 취해요!&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> isLoading <span class="token operator">=</span> <span class="token class-name">BehaviorRelay</span><span class="token operator">&lt;</span><span class="token class-name">Bool</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

        input<span class="token punctuation">.</span>poseTalkButtonTapped
            <span class="token punctuation">.</span>flatMapLatest <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">unowned</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token omit keyword">_</span> <span class="token operator">-&gt;</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">PoseTalk</span><span class="token operator">&gt;</span> <span class="token keyword">in</span>
                <span class="token keyword">self</span><span class="token punctuation">.</span>apiSession<span class="token punctuation">.</span><span class="token function">requestSingle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>retrievePoseTalk<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                poseWord<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">.</span>poseWord<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>

        <span class="token comment">/// 애니메이션 + 네트워크 관련 로직 추가를 고려한 설계</span>
        input<span class="token punctuation">.</span>isAnimating
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                isLoading<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token class-name">Output</span><span class="token punctuation">(</span>animate<span class="token punctuation">:</span> input<span class="token punctuation">.</span>poseTalkButtonTapped<span class="token punctuation">.</span><span class="token function">asDriver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> poseWord<span class="token punctuation">:</span> poseWord<span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isLoading<span class="token punctuation">:</span> isLoading<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>뷰모델이 네트워크 서비스 객체를 직접 소유하고 있으며 버튼 탭 이후 네트워크 요청을 뷰모델에서 직접 진행하게 된다. 이 과정에서 <code>APISession</code> 객체가 제네릭으로 선언되어 있기에 타입 명시가 이루어져야 하고 데이터 정제도 필요하기 때문에 <code>flatMapLatest</code>와 같은 오퍼레이터가 필연적으로 사용된다.</p> <h3 id="리팩토링-후"><a href="#리팩토링-후" class="header-anchor">#</a> 리팩토링 후</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">class</span> <span class="token class-name">PoseTalkViewModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">weak</span> <span class="token keyword">var</span> coordinator<span class="token punctuation">:</span> <span class="token class-name">PoseTalkCoordinator</span><span class="token operator">?</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> posetalkUseCase<span class="token punctuation">:</span> <span class="token class-name">PoseTalkUseCase</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span>coordinator<span class="token punctuation">:</span> <span class="token class-name">PoseTalkCoordinator</span><span class="token operator">?</span><span class="token punctuation">,</span> posetalkUseCase<span class="token punctuation">:</span> <span class="token class-name">PoseTalkUseCase</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>posetalkUseCase <span class="token operator">=</span> posetalkUseCase
    <span class="token punctuation">}</span>

    <span class="token keyword">struct</span> <span class="token class-name">Input</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> poseTalkButtonTapped<span class="token punctuation">:</span> <span class="token class-name">ControlEvent</span><span class="token operator">&lt;</span><span class="token class-name">Void</span><span class="token operator">&gt;</span>
        <span class="token keyword">let</span> isAnimating<span class="token punctuation">:</span> <span class="token class-name">BehaviorRelay</span><span class="token operator">&lt;</span><span class="token class-name">Bool</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">struct</span> <span class="token class-name">Output</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> animate <span class="token operator">=</span> <span class="token class-name">PublishSubject</span><span class="token operator">&lt;</span><span class="token class-name">Void</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> poseWord <span class="token operator">=</span> <span class="token class-name">PublishRelay</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function-definition function">transform</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token class-name">Input</span><span class="token punctuation">,</span> disposeBag<span class="token punctuation">:</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Output</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">configureInput</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> disposeBag<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">createOutput</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> input<span class="token punctuation">,</span> disposeBag<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">configureInput</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> input<span class="token punctuation">:</span> <span class="token class-name">Input</span><span class="token punctuation">,</span> disposeBag<span class="token punctuation">:</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        input<span class="token punctuation">.</span>poseTalkButtonTapped
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span>
                <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>posetalkUseCase<span class="token punctuation">.</span><span class="token function">fetchPoseTalk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">createOutput</span><span class="token punctuation">(</span>from input<span class="token punctuation">:</span> <span class="token class-name">Input</span><span class="token punctuation">,</span> disposeBag<span class="token punctuation">:</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Output</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token class-name">Output</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        input<span class="token punctuation">.</span>poseTalkButtonTapped
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                output<span class="token punctuation">.</span>animate<span class="token punctuation">.</span><span class="token function">onNext</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>

        <span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">combineLatest</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>posetalkUseCase<span class="token punctuation">.</span>poseWord<span class="token punctuation">,</span> input<span class="token punctuation">.</span>isAnimating<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span> poseWord<span class="token punctuation">,</span> animating <span class="token keyword">in</span>
                <span class="token keyword">if</span> <span class="token operator">!</span>animating <span class="token punctuation">{</span>
                    output<span class="token punctuation">.</span>poseWord<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>poseWord<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>

        <span class="token keyword">return</span> output
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>코드의 길이 자체는 길어졌지만 계층이 분리되어 뷰모델의 본질적인 책임인 <strong>뷰로부터의 이벤트 상호작용 로직을 표기하는 것에</strong> 집중도를 확 높일 수 있었다.</p> <ol><li>버튼이 탭 된 이후 뷰모델에 주입된 유스케이스에 데이터를 요청한다.</li> <li>비동기적으로 불러올 데이터를 구독해둔 뒤 뷰에 뿌려줄 아웃풋 옵저버블에 전달한다.</li></ol> <h3 id="유스케이스"><a href="#유스케이스" class="header-anchor">#</a> 유스케이스</h3> <p>유스케이스는 기본적으로 프로토콜과 이를 채택하여 구현한 클래스 두개로 구분된다. 포즈톡 씬의 유스케이스는 다음과 같이 구성된다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">protocol</span> <span class="token class-name">PoseTalkUseCase</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> poseWord<span class="token punctuation">:</span> <span class="token class-name">PublishSubject</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token keyword">set</span> <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function-definition function">fetchPoseTalk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이를 채택하여 구현한 클래스의 경우 아래와 같이 작성된다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">DefaultPoseTalkUseCase</span><span class="token punctuation">:</span> <span class="token class-name">PoseTalkUseCase</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">let</span> posetalkRepository<span class="token punctuation">:</span> <span class="token class-name">DefaultPoseTalkRepository</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> disposeBag <span class="token operator">=</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> poseWord <span class="token operator">=</span> <span class="token class-name">PublishSubject</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span>posetalkRepository<span class="token punctuation">:</span> <span class="token class-name">DefaultPoseTalkRepository</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>posetalkRepository <span class="token operator">=</span> posetalkRepository
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function-definition function">fetchPoseTalk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        posetalkRepository<span class="token punctuation">.</span><span class="token function">fetchPoseWord</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> poseTalk <span class="token keyword">in</span>
                <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>poseWord<span class="token punctuation">.</span><span class="token function">onNext</span><span class="token punctuation">(</span>poseTalk<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>각 유스케이스 프로토콜에서는 씬에서의 데이터 인풋과 아웃풋을 보유하는 책임을 갖도록 작성했다. 포즈톡의 경우 화면에 뿌려줄 단어가 유스케이스의 옵저버블 속성에 바인딩되어 있고, 데이터를 직접 요청하는 함수가 존재한다.</p> <p>유스케이스 역시 본질적인 책임은 데이터 보유 및 전달에 있기 때문에, 데이터를 요청하는 책임은 레파지토리라는 객체에게 위임된다.</p> <h3 id="레파지토리"><a href="#레파지토리" class="header-anchor">#</a> 레파지토리</h3> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">protocol</span> <span class="token class-name">PoseTalkRepository</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function-definition function">fetchPoseWord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>레파지토리는 어떤 데이터를 요청할 지에 대한 함수들을 구현하게 된다. 포즈톡의 경우 포즈 키워드를 서버에게 요청하는 함수만 구현하면 된다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">DefaultPoseTalkRepository</span><span class="token punctuation">:</span> <span class="token class-name">PoseTalkRepository</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> networkService<span class="token punctuation">:</span> <span class="token class-name">NetworkService</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span>networkService<span class="token punctuation">:</span> <span class="token class-name">NetworkService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>networkService <span class="token operator">=</span> networkService
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function-definition function">fetchPoseWord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> request<span class="token punctuation">:</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">PoseTalk</span><span class="token operator">&gt;</span> <span class="token operator">=</span> networkService<span class="token punctuation">.</span><span class="token function">requestSingle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>retrievePoseTalk<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> request<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>poseWord<span class="token punctuation">.</span>content <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>포즈톡 레파지토리 구현체의 경우 네트워크 서비스 객체를 속성으로 가지며 해당 객체를 통해 데이터를 정제까지 한 뒤 옵저버블로 리턴한다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">DefaultPoseTalkRepository</span><span class="token punctuation">:</span> <span class="token class-name">PoseTalkRepository</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> networkService<span class="token punctuation">:</span> <span class="token class-name">NetworkService</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span>networkService<span class="token punctuation">:</span> <span class="token class-name">NetworkService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>networkService <span class="token operator">=</span> networkService
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function-definition function">fetchPoseWord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> networkService<span class="token punctuation">.</span><span class="token function">requestSingle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>retrievePoseTalk<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token punctuation">(</span>poseTalk<span class="token punctuation">:</span> <span class="token class-name">PoseTalk</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token keyword">in</span>
                <span class="token keyword">return</span> poseTalk<span class="token punctuation">.</span>poseWord<span class="token punctuation">.</span>content
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>레파지토리에서 리턴한 옵저버블을 유스케이스에서 구독하고, 최종적으로 데이터가 방출되면 이를 뷰까지 뿌려주는 플로우를 갖는 것이다.</p> <p>뷰모델에서 데이터 요청 및 정제 등 모든 작업들을 일임하다가 책임들을 유스케이스와 레파지토리에 분산시켜 관리하니 뷰모델의 직관성이 향상되었으며 포즈피드 씬의 경우 코드량 자체가 눈에띄게 줄어들게 되었다.</p> <h2 id="테스트코드-작성-1-유스케이스"><a href="#테스트코드-작성-1-유스케이스" class="header-anchor">#</a> 테스트코드 작성 - 1. 유스케이스</h2> <p>포즈피커 앱은 주된 컨텐츠가 이미지이기 때문에 캐시 기반으로 앱이 동작하게 된다. 킹피셔의 경우 메모리 혹은 디스크에 접근한 뒤 URL값을 키로 접근했을 때 이미지를 불러올 수 없는 경우 자동적으로 네트워크를 통해 이미지를 다운로드 하게 된다.</p> <p>이때 목업 URL 프로토콜을 주입해놓으면 테스트 상황에서 xcode 프로젝트의 로컬에 저장되어 있는 이미지를 네트워크로부터 불러온 이미지 대체용으로 전달한 뒤 세션 객체를 종료할 수 있게 된다. 자세한 내용은 <a href="https://parkjju.github.io/vue-TIL/trash/231205-39.html" target="_blank" rel="noopener noreferrer">다음 링크를<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 참조하면 좋다.</p> <p>따라서 유스케이스 함수 호출 이후에, 이미지 캐싱이 정상적으로 이루어지는 지에 대한 테스트 코드를 작성하게 된 것이다. 유스케이스는 기본적으로 레파지토리를 주입받는데, 의존성 주입 형태로 코드를 리팩토링 하였기에 실제 네트워크 요청을 진행하는 레파지토리 객체를 주입하는 것이 아닌, 데이터를 정상적으로 불러온 이후 상황으로 하드코딩된 가짜 데이터 옵저버블을 리턴하게 된다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">PosePickUseCaseTests</span><span class="token punctuation">:</span> <span class="token class-name">XCTestCase</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">var</span> disposeBag <span class="token operator">=</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> posepickRespository<span class="token punctuation">:</span> <span class="token class-name">PosePickRepository</span><span class="token operator">!</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> posepickUseCase<span class="token punctuation">:</span> <span class="token class-name">PosePickUseCase</span><span class="token operator">!</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> scheduler<span class="token punctuation">:</span> <span class="token class-name">TestScheduler</span><span class="token operator">!</span>

    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">// 킹피셔 ImageDownloader 객체에 목업 프로토콜 주입</span>
        <span class="token keyword">let</span> imageDownloader<span class="token punctuation">:</span> <span class="token class-name">ImageDownloader</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> downloader <span class="token operator">=</span> <span class="token class-name">ImageDownloader</span><span class="token punctuation">.</span><span class="token keyword">default</span>
            <span class="token keyword">let</span> configuration <span class="token operator">=</span> <span class="token class-name">URLSessionConfiguration</span><span class="token punctuation">.</span><span class="token keyword">default</span>
            configuration<span class="token punctuation">.</span>protocolClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">MockURLProtocol</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">]</span>
            downloader<span class="token punctuation">.</span>sessionConfiguration <span class="token operator">=</span> configuration
            <span class="token keyword">return</span> downloader
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">// 포즈픽 레파지토리 주입</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>posepickRespository <span class="token operator">=</span> <span class="token class-name">MockPosePickRepository</span><span class="token punctuation">(</span>imageDownloader<span class="token punctuation">:</span> imageDownloader<span class="token punctuation">)</span>

        <span class="token comment">// 유스케이스 생성과 함께 목업 레파지토리 주입</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>posepickUseCase <span class="token operator">=</span> <span class="token class-name">DefaultPosePickUseCase</span><span class="token punctuation">(</span>
            posepickRepository<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">.</span>posepickRespository
        <span class="token punctuation">)</span>

        <span class="token keyword">self</span><span class="token punctuation">.</span>scheduler <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>initialClock<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token class-name">ImageCache</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">clearCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function-definition function">test_</span>디스크<span class="token omit keyword">_</span>캐싱<span class="token omit keyword">_</span>처리가<span class="token omit keyword">_</span>잘<span class="token omit keyword">_</span>되는지 <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> expectation <span class="token operator">=</span> <span class="token class-name">XCTestExpectation</span><span class="token punctuation">(</span>description<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;포즈픽 유스케이스 데이터 잘 불러오는지&quot;</span></span><span class="token punctuation">)</span>

        <span class="token class-name">MockURLProtocol</span><span class="token punctuation">.</span><span class="token function">responseWithStatusCode</span><span class="token punctuation">(</span>code<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">)</span>
        <span class="token class-name">MockURLProtocol</span><span class="token punctuation">.</span><span class="token function">responseWithDTO</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> <span class="token punctuation">.</span>cacheImage<span class="token punctuation">)</span>

        <span class="token keyword">self</span><span class="token punctuation">.</span>scheduler<span class="token punctuation">.</span><span class="token function">createColdObservable</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span>
            <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>posepickUseCase
                <span class="token punctuation">.</span><span class="token function">fetchPosePick</span><span class="token punctuation">(</span>peopleCount<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> disposeBag<span class="token punctuation">)</span>

        <span class="token keyword">self</span><span class="token punctuation">.</span>posepickUseCase
            <span class="token punctuation">.</span>poseImage
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>onNext<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span>
                expectation<span class="token punctuation">.</span><span class="token function">fulfill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">disposed</span><span class="token punctuation">(</span>by<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">.</span>disposeBag<span class="token punctuation">)</span>

        <span class="token keyword">self</span><span class="token punctuation">.</span>scheduler<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token function">wait</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>expectation<span class="token punctuation">]</span><span class="token punctuation">,</span> timeout<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>disposeBag <span class="token operator">=</span> <span class="token class-name">DisposeBag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>posepickUseCase <span class="token operator">=</span> <span class="token nil constant">nil</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>posepickRespository <span class="token operator">=</span> <span class="token nil constant">nil</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>scheduler <span class="token operator">=</span> <span class="token nil constant">nil</span>

        <span class="token class-name">ImageDownloader</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span>sessionConfiguration <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token keyword">default</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>레파지토리의 경우 프로토콜 기반으로 선언된 함수 리스트만 필수적으로 구현하면 확장성 있게 객체 생성이 가능하기 때문에 테스트 코드에서도 레파지토리 타입을 프로토콜로 선언한 뒤, 실제 객체 생성 단계에서는 목업 객체를 주입하는 방식으로 구현할 수 있게 되었다.</p> <p>목업 레파지토리 코드를 보면 다음과 같다.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">MockPosePickRepository</span><span class="token punctuation">:</span> <span class="token class-name">PosePickRepository</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function-definition function">fetchPoseImage</span><span class="token punctuation">(</span>peopleCount<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">UIImage</span><span class="token operator">?&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;TEST URL.com&quot;</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">withUnretained</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span>flatMapLatest <span class="token punctuation">{</span> <span class="token punctuation">(</span>owner<span class="token punctuation">,</span> imageURL<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">UIImage</span><span class="token operator">?&gt;</span> <span class="token keyword">in</span>
                <span class="token keyword">return</span> owner<span class="token punctuation">.</span><span class="token function">cacheItem</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> imageURL<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> imageDownloader<span class="token punctuation">:</span> <span class="token class-name">ImageDownloader</span>

    <span class="token keyword">init</span><span class="token punctuation">(</span>imageDownloader<span class="token punctuation">:</span> <span class="token class-name">ImageDownloader</span> <span class="token operator">=</span> <span class="token class-name">ImageDownloader</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>imageDownloader <span class="token operator">=</span> imageDownloader
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">func</span> <span class="token function-definition function">cacheItem</span><span class="token punctuation">(</span><span class="token keyword">for</span> imageURL<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Observable</span><span class="token operator">&lt;</span><span class="token class-name">UIImage</span><span class="token operator">?&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Observable</span><span class="token punctuation">.</span>create <span class="token punctuation">{</span> observer <span class="token keyword">in</span>
            <span class="token class-name">ImageCache</span><span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">retrieveImageInDiskCache</span><span class="token punctuation">(</span>forKey<span class="token punctuation">:</span> imageURL<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> result <span class="token keyword">in</span>
                <span class="token keyword">guard</span> <span class="token keyword">let</span> <span class="token keyword">self</span> <span class="token operator">=</span> <span class="token keyword">self</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
                <span class="token keyword">switch</span> result <span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">let</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> <span class="token keyword">let</span> image <span class="token operator">=</span> value<span class="token operator">?</span><span class="token punctuation">.</span>images<span class="token operator">?</span><span class="token punctuation">.</span>first <span class="token punctuation">{</span>
                        observer<span class="token punctuation">.</span><span class="token function">onNext</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> imageURL<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">KingfisherManager</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">retrieveImage</span><span class="token punctuation">(</span>with<span class="token punctuation">:</span> url<span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token function">downloader</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>imageDownloader<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> downloadResult <span class="token keyword">in</span>
                            <span class="token keyword">switch</span> downloadResult <span class="token punctuation">{</span>
                            <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">let</span> downloaded<span class="token punctuation">)</span><span class="token punctuation">:</span>
                                observer<span class="token punctuation">.</span><span class="token function">onNext</span><span class="token punctuation">(</span>downloaded<span class="token punctuation">.</span>image<span class="token punctuation">)</span>
                            <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">let</span> error<span class="token punctuation">)</span><span class="token punctuation">:</span>
                                observer<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">let</span> error<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    observer<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token class-name">Disposables</span><span class="token punctuation">.</span>create <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이미지 요청이 들어오게 되면 실제 레파지토리에서는 포즈 내의 <code>imageKey</code>라는 엔티티 속성으로부터 URL을 추출하여 킹피셔 <code>retrieveImage</code> 함수에 전달하게 된다.</p> <p>테스트 코드에서는 네트워크 요청이 필요 없기 때문에 킹피셔에 하드코딩된 가짜 URL을 전달한다. 킹피셔 이미지 다운로더 객체에 주입한 목업 프로토콜로 인해 로컬에 저장된 이미지의 사이즈를 계산하여 테스트 대상 옵저버블에 이벤트로 방출하게 된다.</p> <h2 id="테스트코드-작성-2-뷰모델"><a href="#테스트코드-작성-2-뷰모델" class="header-anchor">#</a> 테스트코드 작성 - 2. 뷰모델</h2> <p>뷰모델의 경우</p> <h2 id="코디네이터-패턴-2"><a href="#코디네이터-패턴-2" class="header-anchor">#</a> 코디네이터 패턴</h2> <h2 id="reference"><a href="#reference" class="header-anchor">#</a> Reference</h2> <ol><li><a href="https://github.com/kudoleh/iOS-Clean-Architecture-MVVM" target="_blank" rel="noopener noreferrer">Template iOS App using Clean Architecture and MVVM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jeonyeohun.tistory.com/305" target="_blank" rel="noopener noreferrer">메이트러너: MVVM + Clean Architecture + RxSwift 도입기<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/vue-TIL/assets/js/app.e604b321.js" defer></script><script src="/vue-TIL/assets/js/2.63c1cf7f.js" defer></script><script src="/vue-TIL/assets/js/1.0419c474.js" defer></script><script src="/vue-TIL/assets/js/42.cfb62c74.js" defer></script><script src="/vue-TIL/assets/js/56.29eec45a.js" defer></script>
  </body>
</html>
